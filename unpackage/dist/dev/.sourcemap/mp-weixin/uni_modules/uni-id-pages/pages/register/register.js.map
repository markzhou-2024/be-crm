{"version":3,"file":"register.js","sources":["uni_modules/uni-id-pages/pages/register/register.vue","uni_modules/uni-id-pages/pages/register/register.vue?type=page"],"sourcesContent":["<!-- 账号注册页 -->\n<template>\n\t<view class=\"uni-content\">\n\t\t<match-media :min-width=\"690\">\n\t\t\t<view class=\"login-logo\">\n\t\t\t\t<image :src=\"logo\"></image>\n\t\t\t</view>\n\t\t\t<!-- 顶部文字 -->\n\t\t\t<text class=\"title title-box\">用户名密码注册</text>\n\t\t</match-media>\n\t\t<uni-forms ref=\"form\" :value=\"formData\" :rules=\"rules\" validate-trigger=\"submit\" err-show-type=\"toast\">\n\t\t\t<uni-forms-item name=\"username\" required>\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusUsername\" @blur=\"focusUsername = false\"\n\t\t\t\t\tclass=\"input-box\" placeholder=\"请输入用户名\" v-model=\"formData.username\" trim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"nickname\">\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusNickname\" @blur=\"focusNickname = false\"\n\t\t\t\t\tclass=\"input-box\" placeholder=\"请输入用户昵称\" v-model=\"formData.nickname\" trim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"password\" v-model=\"formData.password\" required>\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword\" @blur=\"focusPassword = false\"\n\t\t\t\t\tclass=\"input-box\" maxlength=\"20\"\n\t\t\t\t\t:placeholder=\"'请输入' + (config.passwordStrength == 'weak'?'6':'8') + '-16位密码'\" type=\"password\"\n\t\t\t\t\tv-model=\"formData.password\" trim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"password2\" v-model=\"formData.password2\" required>\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword2\" @blur=\"focusPassword2 =false\"\n\t\t\t\t\tclass=\"input-box\" placeholder=\"再次输入密码\" maxlength=\"20\" type=\"password\" v-model=\"formData.password2\"\n\t\t\t\t\ttrim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item>\n\t\t\t\t<uni-captcha ref=\"captcha\" scene=\"register\" v-model=\"formData.captcha\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-id-pages-agreements scope=\"register\" ref=\"agreements\"></uni-id-pages-agreements>\n\t\t\t<button class=\"uni-btn\" type=\"primary\" @click=\"submit\">注册</button>\n\t\t\t<button @click=\"navigateBack\" class=\"register-back\">返回</button>\n\t\t\t<match-media :min-width=\"690\">\n\t\t\t\t<view class=\"link-box\">\n\t\t\t\t\t<text class=\"link\" @click=\"registerByEmail\">邮箱验证码注册</text>\n\t\t\t\t\t<text class=\"link\" @click=\"toLogin\">已有账号？点此登录</text>\n\t\t\t\t</view>\n\t\t\t</match-media>\n\t\t</uni-forms>\n\t</view>\n</template>\n\n<script>\n\timport rules from './validator.js';\n\timport mixin from '@/uni_modules/uni-id-pages/common/login-page.mixin.js';\n\timport config from '@/uni_modules/uni-id-pages/config.js'\n\timport {\n\t\tstore,\n\t\tmutations\n\t} from '@/uni_modules/uni-id-pages/common/store.js'\n\n\tconst uniIdCo = uniCloud.importObject(\"uni-id-co\")\n\texport default {\n\t\tmixins: [mixin],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tformData: {\n\t\t\t\t\tusername: \"\",\n\t\t\t\t\tnickname: \"\",\n\t\t\t\t\tpassword: \"\",\n\t\t\t\t\tpassword2: \"\",\n\t\t\t\t\tcaptcha: \"\"\n\t\t\t\t},\n\t\t\t\trules,\n\t\t\t\tfocusUsername: false,\n\t\t\t\tfocusNickname: false,\n\t\t\t\tfocusPassword: false,\n\t\t\t\tfocusPassword2: false,\n\t\t\t\tlogo: \"/static/logo.png\"\n\t\t\t}\n\t\t},\n\t\tonReady() {\n\t\t\tthis.$refs.form.setRules(this.rules)\n\t\t},\n\t\tonShow() {\n\t\t\t// #ifdef H5\n\t\t\tdocument.onkeydown = event => {\n\t\t\t\tvar e = event || window.event;\n\t\t\t\tif (e && e.keyCode == 13) { //回车键的键值为13\n\t\t\t\t\tthis.submit()\n\t\t\t\t}\n\t\t\t};\n\t\t\t// #endif\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 触发表单提交\n\t\t\t */\n\t\t\tsubmit() {\n\t\t\t\tthis.$refs.form.validate().then((res) => {\n\t\t\t\t\tif (this.formData.captcha.length != 4) {\n\t\t\t\t\t\tthis.$refs.captcha.focusCaptchaInput = true\n\t\t\t\t\t\treturn uni.showToast({\n\t\t\t\t\t\t\ttitle: '请输入验证码',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 3000\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (this.needAgreements && !this.agree) {\n\t\t\t\t\t\treturn this.$refs.agreements.popup(() => {\n\t\t\t\t\t\t\tthis.submitForm(res)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tthis.submitForm(res)\n\t\t\t\t}).catch((errors) => {\n\t\t\t\t\tlet key = errors[0].key\n\t\t\t\t\tkey = key.replace(key[0], key[0].toUpperCase())\n\t\t\t\t\tthis['focus' + key] = true\n\t\t\t\t})\n\t\t\t},\n\t\t\tsubmitForm(params) {\n\t\t\t\tuniIdCo.registerUser(this.formData).then(e => {\n\t\t\t\t\t\tthis.loginSuccess(e)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\tconsole.log(e.message);\n\t\t\t\t\t\t//更好的体验：登录错误，直接刷新验证码\n\t\t\t\t\t\tthis.$refs.captcha.getImageCaptcha()\n\t\t\t\t\t})\n\t\t\t},\n\t\t\tnavigateBack() {\n\t\t\t\tuni.navigateBack()\n\t\t\t},\n\t\t\ttoLogin() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd'\n\t\t\t\t})\n\t\t\t},\n\t\t\tregisterByEmail() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/register/register-by-email'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t@import \"@/uni_modules/uni-id-pages/common/login-page.scss\";\n\n\t@media screen and (max-width: 690px) {\n\t\t.uni-content {\n\t\t\tmargin-top: 15px;\n\t\t\theight: 100%;\n\t\t\tbackground-color: #fff;\n\t\t}\n\t}\n\n\t@media screen and (min-width: 690px) {\n\t\t.uni-content {\n\t\t\tpadding: 30px 40px 60px;\n\t\t\tmax-height: 530px;\n\t\t}\n\n\t\t.link-box {\n\t\t\t/* #ifndef APP-NVUE */\n\t\t\tdisplay: flex;\n\t\t\t/* #endif */\n\t\t\tflex-direction: row;\n\t\t\tjustify-content: space-between;\n\t\t\tmargin-top: 10px;\n\t\t}\n\n\t\t.link {\n\t\t\tfont-size: 12px;\n\t\t}\n\t}\n\n\t.uni-content ::v-deep .uni-forms-item__label {\n\t\tposition: absolute;\n\t\tleft: -15px;\n\t}\n\n\tbutton {\n\t\tmargin-top: 15px;\n\t}\n</style>\n","import MiniProgramPage from '/Users/zhouzhongwei/Documents/HBuilderProjects/be-crm-main/uni_modules/uni-id-pages/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","mixin","rules","uni"],"mappings":";;;;;AAuDC,MAAM,UAAUA,cAAAA,GAAS,aAAa,WAAW;AACjD,MAAK,YAAU;AAAA,EACd,QAAQ,CAACC,8CAAAA,KAAK;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA,QACT,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,QACV,WAAW;AAAA,QACX,SAAS;AAAA,MACT;AAAA,aACDC,gDAAK;AAAA,MACL,eAAe;AAAA,MACf,eAAe;AAAA,MACf,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,MAAM;AAAA,IACP;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,MAAM,KAAK,SAAS,KAAK,KAAK;AAAA,EACnC;AAAA,EACD,SAAS;AAAA,EASR;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,SAAS;AACR,WAAK,MAAM,KAAK,SAAQ,EAAG,KAAK,CAAC,QAAQ;AACxC,YAAI,KAAK,SAAS,QAAQ,UAAU,GAAG;AACtC,eAAK,MAAM,QAAQ,oBAAoB;AACvC,iBAAOC,cAAAA,MAAI,UAAU;AAAA,YACpB,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,QACF;AACA,YAAI,KAAK,kBAAkB,CAAC,KAAK,OAAO;AACvC,iBAAO,KAAK,MAAM,WAAW,MAAM,MAAM;AACxC,iBAAK,WAAW,GAAG;AAAA,WACnB;AAAA,QACF;AACA,aAAK,WAAW,GAAG;AAAA,MACpB,CAAC,EAAE,MAAM,CAAC,WAAW;AACpB,YAAI,MAAM,OAAO,CAAC,EAAE;AACpB,cAAM,IAAI,QAAQ,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,aAAa;AAC9C,aAAK,UAAU,GAAG,IAAI;AAAA,OACtB;AAAA,IACD;AAAA,IACD,WAAW,QAAQ;AAClB,cAAQ,aAAa,KAAK,QAAQ,EAAE,KAAK,OAAK;AAC5C,aAAK,aAAa,CAAC;AAAA,OACnB,EACA,MAAM,OAAK;AACXA,wGAAY,EAAE,OAAO;AAErB,aAAK,MAAM,QAAQ,gBAAgB;AAAA,OACnC;AAAA,IACF;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,aAAa;AAAA,IACjB;AAAA,IACD,UAAU;AACTA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,kBAAkB;AACjBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzID,GAAG,WAAW,eAAe;"}