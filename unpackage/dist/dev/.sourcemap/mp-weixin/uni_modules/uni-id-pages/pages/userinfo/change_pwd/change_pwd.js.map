{"version":3,"file":"change_pwd.js","sources":["uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd.vue","../../../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/dW5pX21vZHVsZXMvdW5pLWlkLXBhZ2VzL3BhZ2VzL3VzZXJpbmZvL2NoYW5nZV9wd2QvY2hhbmdlX3B3ZC52dWU"],"sourcesContent":["<!-- 修改密码 -->\r\n<template>\r\n\t<view class=\"uni-content\">\r\n\t\t<match-media :min-width=\"690\">\r\n\t\t\t<view class=\"login-logo\">\r\n\t\t\t\t<image :src=\"logo\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 顶部文字 -->\r\n\t\t\t<text class=\"title title-box\">修改密码</text>\r\n\t\t</match-media>\r\n\t\t<uni-forms ref=\"form\" :value=\"formData\" err-show-type=\"toast\">\r\n\t\t\t<uni-forms-item name=\"oldPassword\">\r\n\t\t\t\t<uni-easyinput :focus=\"focusOldPassword\" @blur=\"focusOldPassword = false\" class=\"input-box\"\r\n\t\t\t\t\ttype=\"password\" :inputBorder=\"false\" v-model=\"formData.oldPassword\" placeholder=\"请输入旧密码\">\r\n\t\t\t\t</uni-easyinput>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"newPassword\">\r\n\t\t\t\t<uni-easyinput :focus=\"focusNewPassword\" @blur=\"focusNewPassword = false\" class=\"input-box\"\r\n\t\t\t\t\ttype=\"password\" :inputBorder=\"false\" v-model=\"formData.newPassword\" placeholder=\"请输入新密码\">\r\n\t\t\t\t</uni-easyinput>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"newPassword2\">\r\n\t\t\t\t<uni-easyinput :focus=\"focusNewPassword2\" @blur=\"focusNewPassword2 = false\" class=\"input-box\"\r\n\t\t\t\t\ttype=\"password\" :inputBorder=\"false\" v-model=\"formData.newPassword2\" placeholder=\"请再次输入新密码\">\r\n\t\t\t\t</uni-easyinput>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<button class=\"uni-btn send-btn-box\" type=\"primary\" @click=\"submit\">提交</button>\r\n\t\t</uni-forms>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport mixin from '@/uni_modules/uni-id-pages/common/login-page.mixin.js';\r\n  import passwordMod from '@/uni_modules/uni-id-pages/common/password.js'\r\n  const uniIdCo = uniCloud.importObject(\"uni-id-co\", {\r\n\t\tcustomUI:true\r\n\t})\r\n\texport default {\r\n\t\tmixins: [mixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfocusOldPassword: false,\r\n\t\t\t\tfocusNewPassword: false,\r\n\t\t\t\tfocusNewPassword2: false,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\t'oldPassword': '',\r\n\t\t\t\t\t'newPassword': '',\r\n\t\t\t\t\t'newPassword2': '',\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\toldPassword: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入新密码',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: /^.{6,20}$/,\r\n\t\t\t\t\t\t\t\terrorMessage: '密码为6 - 20位',\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n          ...passwordMod.getPwdRules('newPassword', 'newPassword2')\r\n        },\r\n\t\t\t\tlogo: \"/static/logo.png\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$refs.form.setRules(this.rules)\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// #ifdef H5\r\n\t\t\tdocument.onkeydown = event => {\r\n\t\t\t\tvar e = event || window.event;\r\n\t\t\t\tif (e && e.keyCode == 13) { //回车键的键值为13\r\n\t\t\t\t\tthis.submit()\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 完成并提交\r\n\t\t\t */\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs.form.validate()\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\toldPassword,\r\n\t\t\t\t\t\t\tnewPassword\r\n\t\t\t\t\t\t} = this.formData\r\n\t\t\t\t\t\tuniIdCo.updatePwd({\r\n\t\t\t\t\t\t\t\toldPassword,\r\n\t\t\t\t\t\t\t\tnewPassword\r\n\t\t\t\t\t\t\t}).then(e => {\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('uni_id_token');\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('uni_id_token_expired', 0)\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl:'/uni_modules/uni-id-pages/pages/login/login-withpwd'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}).catch(e => {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tcontent: e.message,\r\n\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}).catch(errors => {\r\n\t\t\t\t\t\tlet key = errors[0].key\r\n\t\t\t\t\t\tkey = key.replace(key[0], key[0].toUpperCase())\r\n\t\t\t\t\t\tthis['focus' + key] = true\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"@/uni_modules/uni-id-pages/common/login-page.scss\";\r\n\r\n\t@media screen and (max-width: 690px) {\r\n\t\t.uni-content{\r\n\t\t\tmargin-top: 15px;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (min-width: 690px) {\r\n\t\t.uni-content{\r\n\t\t\tpadding: 30px 40px 40px;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/移动云盘同步盘/hua-应用/be-crm/be-crm/be-crm/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniIdCo","uniCloud","_sfc_main","mixin","passwordMod","res","oldPassword","newPassword","e","uni","errors","key","MiniProgramPage"],"mappings":"0JAkCQA,EAAUC,EAAAA,GAAS,aAAa,YAAa,CACnD,SAAS,GACT,EACIC,EAAU,CACd,OAAQ,CAACC,EAAAA,KAAK,EACd,MAAO,CACN,MAAO,CACN,iBAAkB,GAClB,iBAAkB,GAClB,kBAAmB,GACnB,SAAU,CACT,YAAe,GACf,YAAe,GACf,aAAgB,EAChB,EACD,MAAO,CACN,YAAa,CACZ,MAAO,CAAC,CACN,SAAU,GACV,aAAc,QACd,EACD,CACC,QAAS,YACT,aAAc,YACf,CACD,CACA,EACI,GAAGC,cAAY,YAAY,cAAe,cAAc,CACzD,EACL,KAAM,kBACP,CACA,EACD,SAAU,CACT,KAAK,MAAM,KAAK,SAAS,KAAK,KAAK,CACnC,EACD,QAAS,CASR,EACD,QAAS,CAIR,QAAS,CACR,KAAK,MAAM,KAAK,SAAS,EACvB,KAAKC,GAAO,CACZ,GAAI,CACH,YAAAC,EACA,YAAAC,CACD,EAAI,KAAK,SACTP,EAAQ,UAAU,CAChB,YAAAM,EACA,YAAAC,EACA,EAAE,KAAKC,GAAK,CACZC,QAAI,kBAAkB,cAAc,EACpCA,QAAI,eAAe,uBAAwB,CAAC,EAC5CA,EAAAA,MAAI,WAAW,CACd,IAAI,sDACJ,EACD,EAAE,MAAMD,GAAK,CACbC,EAAAA,MAAI,UAAU,CACb,QAASD,EAAE,QACX,WAAY,EACb,CAAC,EACD,CACH,CAAC,EAAE,MAAME,GAAU,CAClB,IAAIC,EAAMD,EAAO,CAAC,EAAE,IACpBC,EAAMA,EAAI,QAAQA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAE,aAAa,EAC9C,KAAK,QAAUA,CAAG,EAAI,GACtB,CACH,CACD,CACD,2sCC/GD,GAAG,WAAWC,CAAe"}