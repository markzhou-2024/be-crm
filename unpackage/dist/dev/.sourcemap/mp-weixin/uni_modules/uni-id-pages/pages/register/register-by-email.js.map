{"version":3,"file":"register-by-email.js","sources":["uni_modules/uni-id-pages/pages/register/register-by-email.vue","../../../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/dW5pX21vZHVsZXMvdW5pLWlkLXBhZ2VzL3BhZ2VzL3JlZ2lzdGVyL3JlZ2lzdGVyLWJ5LWVtYWlsLnZ1ZQ"],"sourcesContent":["<!-- 邮箱验证码注册 -->\r\n<template>\r\n\t<view class=\"uni-content\">\r\n\t\t<match-media :min-width=\"690\">\r\n\t\t\t<view class=\"login-logo\">\r\n\t\t\t\t<image :src=\"logo\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 顶部文字 -->\r\n\t\t\t<text class=\"title title-box\">邮箱验证码注册</text>\r\n\t\t</match-media>\r\n\t\t<uni-forms ref=\"form\" :value=\"formData\" :rules=\"rules\" validate-trigger=\"submit\" err-show-type=\"toast\">\r\n\t\t\t<uni-forms-item name=\"email\" required>\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusEmail\" @blur=\"focusEmail = false\"\r\n\t\t\t\t\tclass=\"input-box\" placeholder=\"请输入邮箱\" v-model=\"formData.email\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"nickname\">\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusNickname\" @blur=\"focusNickname = false\" class=\"input-box\" placeholder=\"请输入用户昵称\" \r\n\t\t\t\tv-model=\"formData.nickname\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"password\" v-model=\"formData.password\" required>\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword\" @blur=\"focusPassword = false\"\r\n\t\t\t\t\tclass=\"input-box\" maxlength=\"20\" :placeholder=\"'请输入' + (config.passwordStrength == 'weak'?'6':'8') + '-16位密码'\" type=\"password\"\r\n\t\t\t\t\tv-model=\"formData.password\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"password2\" v-model=\"formData.password2\" required>\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword2\" @blur=\"focusPassword2 =false\"\r\n\t\t\t\t\tclass=\"input-box\" placeholder=\"再次输入密码\" maxlength=\"20\" type=\"password\" v-model=\"formData.password2\"\r\n\t\t\t\t\ttrim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"code\" >\r\n\t\t\t\t<uni-id-pages-email-form ref=\"shortCode\" :email=\"formData.email\" type=\"register\" v-model=\"formData.code\">\r\n\t\t\t\t</uni-id-pages-email-form>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-id-pages-agreements scope=\"register\" ref=\"agreements\" ></uni-id-pages-agreements>\r\n\t\t\t<button class=\"uni-btn\" type=\"primary\" @click=\"submit\">注册</button>\r\n\t\t\t<button @click=\"navigateBack\" class=\"register-back\">返回</button>\r\n\t\t\t<match-media :min-width=\"690\">\r\n\t\t\t\t<view class=\"link-box\">\r\n\t\t\t\t\t<text class=\"link\" @click=\"registerByUserName\">用户名密码注册</text>\r\n\t\t\t\t\t<text class=\"link\" @click=\"toLogin\">已有账号？点此登录</text>\r\n\t\t\t\t</view>\r\n\t\t\t</match-media>\r\n\t\t</uni-forms>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport rules from './validator.js';\r\n\timport mixin from '@/uni_modules/uni-id-pages/common/login-page.mixin.js';\r\n\timport config from '@/uni_modules/uni-id-pages/config.js'\r\n\timport passwordMod from '@/uni_modules/uni-id-pages/common/password.js'\r\n\tconst uniIdCo = uniCloud.importObject(\"uni-id-co\")\r\n\texport default {\r\n\t\tmixins: [mixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformData: {\r\n\t\t\t\t\temail: \"\",\r\n\t\t\t\t\tnickname: \"\",\r\n\t\t\t\t\tpassword: \"\",\r\n\t\t\t\t\tpassword2: \"\",\r\n\t\t\t\t\tcode: \"\"\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\temail: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入邮箱',\r\n\t\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\t\tformat:'email',\r\n\t\t\t\t\t\t\t\terrorMessage: '邮箱格式不正确',\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnickname: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\tminLength: 3,\r\n\t\t\t\t\t\t\t\tmaxLength: 32,\r\n\t\t\t\t\t\t\t\terrorMessage: '昵称长度在 {minLength} 到 {maxLength} 个字符',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalidateFunction: function(rule, value, data, callback) {\r\n\t\t\t\t\t\t\t\t\t// console.log(value);\r\n\t\t\t\t\t\t\t\t\tif (/^1\\d{10}$/.test(value) || /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/.test(value)) {\r\n\t\t\t\t\t\t\t\t\t\tcallback('昵称不能是：手机号或邮箱')\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif (/^\\d+$/.test(value)) {\r\n\t\t\t\t\t\t\t\t\t\tcallback('昵称不能为纯数字')\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif(/[\\u4E00-\\u9FA5\\uF900-\\uFA2D]{1,}/.test(value)){\r\n\t\t\t\t\t\t\t\t\t\tcallback('昵称不能包含中文')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tlabel: \"昵称\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...passwordMod.getPwdRules(),\r\n\t\t\t\t\tcode: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入邮箱验证码',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: /^.{6}$/,\r\n\t\t\t\t\t\t\t\terrorMessage: '邮箱验证码不正确',\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfocusEmail:false,\r\n\t\t\t\tfocusNickname:false,\r\n\t\t\t\tfocusPassword:false,\r\n\t\t\t\tfocusPassword2:false,\r\n\t\t\t\tlogo: \"/static/logo.png\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$refs.form.setRules(this.rules)\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// #ifdef H5\r\n\t\t\tdocument.onkeydown = event => {\r\n\t\t\t\tvar e = event || window.event;\r\n\t\t\t\tif (e && e.keyCode == 13) { //回车键的键值为13\r\n\t\t\t\t\tthis.submit()\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 触发表单提交\r\n\t\t\t */\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs.form.validate().then((res) => {\r\n\t\t\t\t\tif (this.needAgreements && !this.agree) {\r\n\t\t\t\t\t\treturn this.$refs.agreements.popup(()=>{\r\n\t\t\t\t\t\t\tthis.submitForm(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.submitForm(res)\r\n\t\t\t\t}).catch((errors) => {\r\n\t\t\t\t\tlet key = errors[0].key\r\n\t\t\t\t\tkey = key.replace(key[0], key[0].toUpperCase())\r\n\t\t\t\t\t// console.log(key);\r\n\t\t\t\t\tthis['focus'+key] = true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmitForm(params) {\r\n\t\t\t\tuniIdCo.registerUserByEmail(this.formData).then(e => {\r\n\t\t\t\t\t// console.log(e);\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd',\r\n\t\t\t\t\t\tcomplete: (e) => {\r\n\t\t\t\t\t\t\t// console.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\t// console.log(e);\r\n\t\t\t\t\tconsole.log(e.message);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavigateBack() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\ttoLogin() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tregisterByUserName() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/register/register'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"@/uni_modules/uni-id-pages/common/login-page.scss\";\r\n\t\r\n\t@media screen and (max-width: 690px) {\r\n\t\t.uni-content{\r\n\t\t\tmargin-top: 15px;\r\n\t\t}\r\n\t}\r\n\t@media screen and (min-width: 690px) {\r\n\t\t.uni-content{\r\n\t\t\tpadding: 30px 40px;\r\n\t\t\tmax-height: 650px;\r\n\t\t}\r\n\t\t.link-box {\r\n\t\t\t/* #ifndef APP-NVUE */\r\n\t\t\tdisplay: flex;\r\n\t\t\t/* #endif */\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-top: 10px;\r\n\t\t}\r\n\t\t.link {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\t}\r\n\t.uni-content ::v-deep .uni-forms-item__label {\r\n\t\tposition: absolute;\r\n\t\tleft: -15px;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tmargin-top: 15px;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/移动云盘同步盘/hua-应用/be-crm/be-crm/be-crm/uni_modules/uni-id-pages/pages/register/register-by-email.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniIdCo","uniCloud","_sfc_main","mixin","rule","value","data","callback","passwordMod","res","errors","key","params","e","uni","MiniProgramPage"],"mappings":"iLAmDOA,EAAUC,EAAAA,GAAS,aAAa,WAAW,EAC5CC,EAAU,CACd,OAAQ,CAACC,EAAAA,KAAK,EACd,MAAO,CACN,MAAO,CACN,SAAU,CACT,MAAO,GACP,SAAU,GACV,SAAU,GACV,UAAW,GACX,KAAM,EACN,EACD,MAAO,CACN,MAAO,CACN,MAAO,CAAC,CACN,SAAU,GACV,aAAc,OACf,EAAE,CACD,OAAO,QACP,aAAc,SACf,CACD,CACA,EACD,SAAU,CACT,MAAO,CAAC,CACN,UAAW,EACX,UAAW,GACX,aAAc,qCACd,EACD,CACC,iBAAkB,SAASC,EAAMC,EAAOC,EAAMC,EAAU,CAEvD,OAAI,YAAY,KAAKF,CAAK,GAAK,kCAAkC,KAAKA,CAAK,IAC1EE,EAAS,cAAc,EAEpB,QAAQ,KAAKF,CAAK,GACrBE,EAAS,UAAU,EAEjB,mCAAmC,KAAKF,CAAK,GAC/CE,EAAS,UAAU,EAEb,EACR,CACD,CACA,EACD,MAAO,IACP,EACD,GAAGC,EAAAA,YAAY,YAAa,EAC5B,KAAM,CACL,MAAO,CAAC,CACN,SAAU,GACV,aAAc,UACd,EACD,CACC,QAAS,SACT,aAAc,UACf,CACD,CACD,CACA,EACD,WAAW,GACX,cAAc,GACd,cAAc,GACd,eAAe,GACf,KAAM,kBACP,CACA,EACD,SAAU,CACT,KAAK,MAAM,KAAK,SAAS,KAAK,KAAK,CACnC,EACD,QAAS,CASR,EACD,QAAS,CAIR,QAAS,CACR,KAAK,MAAM,KAAK,SAAQ,EAAG,KAAMC,GAAQ,CACxC,GAAI,KAAK,gBAAkB,CAAC,KAAK,MAChC,OAAO,KAAK,MAAM,WAAW,MAAM,IAAI,CACtC,KAAK,WAAWA,CAAG,EACnB,EAEF,KAAK,WAAWA,CAAG,CACpB,CAAC,EAAE,MAAOC,GAAW,CACpB,IAAIC,EAAMD,EAAO,CAAC,EAAE,IACpBC,EAAMA,EAAI,QAAQA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAE,aAAa,EAE9C,KAAK,QAAQA,CAAG,EAAI,GACpB,CACD,EACD,WAAWC,EAAQ,CAClBZ,EAAQ,oBAAoB,KAAK,QAAQ,EAAE,KAAKa,GAAK,CAEpDC,EAAAA,MAAI,WAAW,CACd,IAAK,sDACL,SAAWD,GAAM,CAEjB,EACA,EACD,EACA,MAAMA,GAAK,CAEXC,EAAA,MAAA,MAAA,MAAA,uEAAYD,EAAE,OAAO,EACrB,CACD,EACD,cAAe,CACdC,EAAAA,MAAI,aAAa,CACjB,EACD,SAAU,CACTA,EAAAA,MAAI,WAAW,CACd,IAAK,sDACL,CACD,EACD,oBAAqB,CACpBA,EAAAA,MAAI,WAAW,CACd,IAAK,oDACL,CACF,CACD,CACD,ywEClLD,GAAG,WAAWC,CAAe"}