{"version":3,"file":"register-by-email.js","sources":["uni_modules/uni-id-pages/pages/register/register-by-email.vue","uni_modules/uni-id-pages/pages/register/register-by-email.vue?type=page"],"sourcesContent":["<!-- 邮箱验证码注册 -->\n<template>\n\t<view class=\"uni-content\">\n\t\t<match-media :min-width=\"690\">\n\t\t\t<view class=\"login-logo\">\n\t\t\t\t<image :src=\"logo\"></image>\n\t\t\t</view>\n\t\t\t<!-- 顶部文字 -->\n\t\t\t<text class=\"title title-box\">邮箱验证码注册</text>\n\t\t</match-media>\n\t\t<uni-forms ref=\"form\" :value=\"formData\" :rules=\"rules\" validate-trigger=\"submit\" err-show-type=\"toast\">\n\t\t\t<uni-forms-item name=\"email\" required>\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusEmail\" @blur=\"focusEmail = false\"\n\t\t\t\t\tclass=\"input-box\" placeholder=\"请输入邮箱\" v-model=\"formData.email\" trim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"nickname\">\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusNickname\" @blur=\"focusNickname = false\" class=\"input-box\" placeholder=\"请输入用户昵称\" \n\t\t\t\tv-model=\"formData.nickname\" trim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"password\" v-model=\"formData.password\" required>\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword\" @blur=\"focusPassword = false\"\n\t\t\t\t\tclass=\"input-box\" maxlength=\"20\" :placeholder=\"'请输入' + (config.passwordStrength == 'weak'?'6':'8') + '-16位密码'\" type=\"password\"\n\t\t\t\t\tv-model=\"formData.password\" trim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"password2\" v-model=\"formData.password2\" required>\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword2\" @blur=\"focusPassword2 =false\"\n\t\t\t\t\tclass=\"input-box\" placeholder=\"再次输入密码\" maxlength=\"20\" type=\"password\" v-model=\"formData.password2\"\n\t\t\t\t\ttrim=\"both\" />\n\t\t\t</uni-forms-item>\n\t\t\t<uni-forms-item name=\"code\" >\n\t\t\t\t<uni-id-pages-email-form ref=\"shortCode\" :email=\"formData.email\" type=\"register\" v-model=\"formData.code\">\n\t\t\t\t</uni-id-pages-email-form>\n\t\t\t</uni-forms-item>\n\t\t\t<uni-id-pages-agreements scope=\"register\" ref=\"agreements\" ></uni-id-pages-agreements>\n\t\t\t<button class=\"uni-btn\" type=\"primary\" @click=\"submit\">注册</button>\n\t\t\t<button @click=\"navigateBack\" class=\"register-back\">返回</button>\n\t\t\t<match-media :min-width=\"690\">\n\t\t\t\t<view class=\"link-box\">\n\t\t\t\t\t<text class=\"link\" @click=\"registerByUserName\">用户名密码注册</text>\n\t\t\t\t\t<text class=\"link\" @click=\"toLogin\">已有账号？点此登录</text>\n\t\t\t\t</view>\n\t\t\t</match-media>\n\t\t</uni-forms>\n\t</view>\n</template>\n\n<script>\n\timport rules from './validator.js';\n\timport mixin from '@/uni_modules/uni-id-pages/common/login-page.mixin.js';\n\timport config from '@/uni_modules/uni-id-pages/config.js'\n\timport passwordMod from '@/uni_modules/uni-id-pages/common/password.js'\n\tconst uniIdCo = uniCloud.importObject(\"uni-id-co\")\n\texport default {\n\t\tmixins: [mixin],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tformData: {\n\t\t\t\t\temail: \"\",\n\t\t\t\t\tnickname: \"\",\n\t\t\t\t\tpassword: \"\",\n\t\t\t\t\tpassword2: \"\",\n\t\t\t\t\tcode: \"\"\n\t\t\t\t},\n\t\t\t\trules: {\n\t\t\t\t\temail: {\n\t\t\t\t\t\trules: [{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\terrorMessage: '请输入邮箱',\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tformat:'email',\n\t\t\t\t\t\t\t\terrorMessage: '邮箱格式不正确',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tnickname: {\n\t\t\t\t\t\trules: [{\n\t\t\t\t\t\t\t\tminLength: 3,\n\t\t\t\t\t\t\t\tmaxLength: 32,\n\t\t\t\t\t\t\t\terrorMessage: '昵称长度在 {minLength} 到 {maxLength} 个字符',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalidateFunction: function(rule, value, data, callback) {\n\t\t\t\t\t\t\t\t\t// console.log(value);\n\t\t\t\t\t\t\t\t\tif (/^1\\d{10}$/.test(value) || /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/.test(value)) {\n\t\t\t\t\t\t\t\t\t\tcallback('昵称不能是：手机号或邮箱')\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tif (/^\\d+$/.test(value)) {\n\t\t\t\t\t\t\t\t\t\tcallback('昵称不能为纯数字')\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tif(/[\\u4E00-\\u9FA5\\uF900-\\uFA2D]{1,}/.test(value)){\n\t\t\t\t\t\t\t\t\t\tcallback('昵称不能包含中文')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tlabel: \"昵称\"\n\t\t\t\t\t},\n\t\t\t\t\t...passwordMod.getPwdRules(),\n\t\t\t\t\tcode: {\n\t\t\t\t\t\trules: [{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\terrorMessage: '请输入邮箱验证码',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: /^.{6}$/,\n\t\t\t\t\t\t\t\terrorMessage: '邮箱验证码不正确',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfocusEmail:false,\n\t\t\t\tfocusNickname:false,\n\t\t\t\tfocusPassword:false,\n\t\t\t\tfocusPassword2:false,\n\t\t\t\tlogo: \"/static/logo.png\"\n\t\t\t}\n\t\t},\n\t\tonReady() {\n\t\t\tthis.$refs.form.setRules(this.rules)\n\t\t},\n\t\tonShow() {\n\t\t\t// #ifdef H5\n\t\t\tdocument.onkeydown = event => {\n\t\t\t\tvar e = event || window.event;\n\t\t\t\tif (e && e.keyCode == 13) { //回车键的键值为13\n\t\t\t\t\tthis.submit()\n\t\t\t\t}\n\t\t\t};\n\t\t\t// #endif\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 触发表单提交\n\t\t\t */\n\t\t\tsubmit() {\n\t\t\t\tthis.$refs.form.validate().then((res) => {\n\t\t\t\t\tif (this.needAgreements && !this.agree) {\n\t\t\t\t\t\treturn this.$refs.agreements.popup(()=>{\n\t\t\t\t\t\t\tthis.submitForm(res)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tthis.submitForm(res)\n\t\t\t\t}).catch((errors) => {\n\t\t\t\t\tlet key = errors[0].key\n\t\t\t\t\tkey = key.replace(key[0], key[0].toUpperCase())\n\t\t\t\t\t// console.log(key);\n\t\t\t\t\tthis['focus'+key] = true\n\t\t\t\t})\n\t\t\t},\n\t\t\tsubmitForm(params) {\n\t\t\t\tuniIdCo.registerUserByEmail(this.formData).then(e => {\n\t\t\t\t\t// console.log(e);\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd',\n\t\t\t\t\t\tcomplete: (e) => {\n\t\t\t\t\t\t\t// console.log(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\t// console.log(e);\n\t\t\t\t\tconsole.log(e.message);\n\t\t\t\t})\n\t\t\t},\n\t\t\tnavigateBack() {\n\t\t\t\tuni.navigateBack()\n\t\t\t},\n\t\t\ttoLogin() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd'\n\t\t\t\t})\n\t\t\t},\n\t\t\tregisterByUserName() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/register/register'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t@import \"@/uni_modules/uni-id-pages/common/login-page.scss\";\n\t\n\t@media screen and (max-width: 690px) {\n\t\t.uni-content{\n\t\t\tmargin-top: 15px;\n\t\t}\n\t}\n\t@media screen and (min-width: 690px) {\n\t\t.uni-content{\n\t\t\tpadding: 30px 40px;\n\t\t\tmax-height: 650px;\n\t\t}\n\t\t.link-box {\n\t\t\t/* #ifndef APP-NVUE */\n\t\t\tdisplay: flex;\n\t\t\t/* #endif */\n\t\t\tflex-direction: row;\n\t\t\tjustify-content: space-between;\n\t\t\tmargin-top: 10px;\n\t\t}\n\t\t.link {\n\t\t\tfont-size: 12px;\n\t\t}\n\t}\n\t.uni-content ::v-deep .uni-forms-item__label {\n\t\tposition: absolute;\n\t\tleft: -15px;\n\t}\n\n\tbutton {\n\t\tmargin-top: 15px;\n\t}\n</style>\n","import MiniProgramPage from '/Users/zhouzhongwei/Documents/HBuilderProjects/be-crm-main/uni_modules/uni-id-pages/pages/register/register-by-email.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","mixin","passwordMod","uni","e"],"mappings":"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"}