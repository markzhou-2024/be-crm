{"version":3,"file":"shopsStore.js","sources":["utils/shopsStore.js"],"sourcesContent":["// utils/shopsStore.js\n\nconst KEY = 'shops_mock';\n\n/** 读取门店列表（本地存储） */\nexport function loadShops(fallback = []) {\n  try {\n    const val = uni.getStorageSync(KEY);\n    return Array.isArray(val) ? val : fallback;\n  } catch (e) {\n    return fallback;\n  }\n}\n\n/** 写入门店列表（本地存储） */\nexport function saveShops(list) {\n  uni.setStorageSync(KEY, list || []);\n}\n\n/** 按 id 查找门店 */\nexport function findShopById(list, id) {\n  return (list || []).find(s => s && s._id === id);\n}\n\n/** 新增或替换门店 */\nexport function upsertShop(list, shop) {\n  const arr = list || [];\n  const idx = arr.findIndex(x => x && x._id === shop._id);\n  if (idx >= 0) arr.splice(idx, 1, shop);\n  else arr.unshift(shop);\n  return arr;\n}\n\n/** 一次性迁移：给旧门店补齐 month_revenue 字段（默认 0） */\nexport function migrateShopsRevenue() {\n  const list = loadShops([]);\n  let changed = false;\n  list.forEach(s => {\n    if (typeof s.month_revenue === 'undefined') {\n      s.month_revenue = 0;\n      changed = true;\n    }\n  });\n  if (changed) saveShops(list);\n}\n\n/** 可选：演示门店数据 */\nexport function demoShops() {\n  return [\n    // { _id: 'shop_1', store_name: '静安旗舰店', month_revenue: 128500, address: '上海市静安区××路' }\n  ];\n}\n\n/** 默认导出（便于按需导入） */\nexport default {\n  loadShops,\n  saveShops,\n  findShopById,\n  upsertShop,\n  migrateShopsRevenue,\n  demoShops\n};\n"],"names":["uni"],"mappings":";;AAEA,MAAM,MAAM;AAGL,SAAS,UAAU,WAAW,IAAI;AACvC,MAAI;AACF,UAAM,MAAMA,cAAAA,MAAI,eAAe,GAAG;AAClC,WAAO,MAAM,QAAQ,GAAG,IAAI,MAAM;AAAA,EACnC,SAAQ,GAAG;AACV,WAAO;AAAA,EACR;AACH;AAGO,SAAS,UAAU,MAAM;AAC9BA,gBAAAA,MAAI,eAAe,KAAK,QAAQ,CAAE,CAAA;AACpC;;;"}