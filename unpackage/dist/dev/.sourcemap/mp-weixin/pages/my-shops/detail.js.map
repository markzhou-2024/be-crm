{"version":3,"file":"detail.js","sources":["pages/my-shops/detail.vue","pages/my-shops/detail.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"edit-btn\" @tap=\"goEdit\">ÁºñËæë</view>\n    <view class=\"nav-gap\"></view>\n\n    <view class=\"hero\">\n      <image class=\"hero-img\" :src=\"shop.cover_image\" mode=\"aspectFill\" />\n    </view>\n\n    <view class=\"card\">\n      <view class=\"shop-name\">{{ shop.store_name }}</view>\n\n      <view class=\"row\">\n        <text class=\"icon\">üìû</text>\n        <text class=\"label\">ËÅîÁ≥ªÁîµËØù</text>\n        <text class=\"val\">{{ shop.phone || '‚Äî' }}</text>\n      </view>\n\n      <view class=\"row\">\n        <text class=\"icon\">üìç</text>\n        <text class=\"label\">Èó®Â∫óÂú∞ÂùÄ</text>\n        <text class=\"val\">{{ shop.store_address }}</text>\n      </view>\n\n      <view class=\"row\">\n        <text class=\"icon\">‚è∞</text>\n        <text class=\"label\">Ëê•‰∏öÊó∂Èó¥</text>\n        <text class=\"val\">{{ shop.business_hours || '10:00 - 22:00' }}</text>\n      </view>\n\n      <view class=\"row customers-row\">\n        <view class=\"row-left\">\n          <text class=\"icon\">üë•</text>\n          <text class=\"label\">ÂÆ¢Êà∑Êï∞Èáè</text>\n          <text class=\"val\">{{ shop.customer_count || 0 }} ‰Ωç</text>\n        </view>\n        <button class=\"mini-btn\" size=\"mini\" @tap=\"goCustomers\">Êü•Áúã</button>\n      </view>\n    </view>\n\n    <view class=\"card\">\n      <view class=\"section-title\">Ëøë7Êó•ÂÆ¢ÊµÅË∂ãÂäø</view>\n      <view class=\"chart-placeholder\"><text>ÔºàÂõæË°®Âç†‰ΩçÔºâ</text></view>\n    </view>\n\n    <view class=\"cta\">\n      <button class=\"btn primary\" @tap=\"addCustomer\">üë§ Ê∑ªÂä†ÂÆ¢Êà∑</button>\n      <button class=\"btn ghost\" @tap=\"openCalendar\">üìÖ Êü•ÁúãÈ¢ÑÁ∫¶Êó•ÂéÜ</button>\n    </view>\n  </view>\n</template>\n\n<script>\n// @ts-nocheck\nimport { fetchCustomers } from '@/api/customers.js'\n\nexport default {\n  data() {\n    return {\n      id: '',\n      shop: {\n        store_name: '',\n        store_address: '',\n        cover_image: '',\n        month_revenue: 0,\n        customer_count: 0,\n        phone: '',\n        business_hours: '10:00 - 22:00',\n        status: 'active'\n      }\n    }\n  },\n  created() {\n    this.service = uniCloud.importObject('curd-shops')\n  },\n  onLoad(query) {\n    this.id = (query && query.id) || ''\n    uni.setNavigationBarTitle({ title: 'Èó®Â∫óËØ¶ÊÉÖ' })\n    if (!this.id) {\n      uni.showToast({ title: 'Áº∫Â∞ëÈó®Â∫óID', icon: 'none' })\n      return\n    }\n    this.fetchShop()\n  },\n  onShow() {\n    if (this.id) {\n      this.fetchShop()\n    }\n  },\n  methods: {\n    async fetchShop() {\n      try {\n        const data = await this.service.getShopById(this.id)\n        if (data) {\n          const info = { ...data }\n          try {\n            const customers = await fetchCustomers()\n            info.customer_count = (customers || []).filter(c => c.store_id === this.id).length\n          } catch (e) {\n            info.customer_count = data.customer_count || 0\n          }\n          this.shop = info\n          if (info.store_name) {\n            uni.setNavigationBarTitle({ title: info.store_name })\n          }\n        } else {\n          uni.showToast({ title: 'Êú™ÊâæÂà∞Èó®Â∫ó‰ø°ÊÅØ', icon: 'none' })\n        }\n      } catch (err) {\n        uni.showToast({ title: err?.errMsg || err?.message || 'Âä†ËΩΩÂ§±Ë¥•', icon: 'none' })\n      }\n    },\n    addCustomer() { uni.showToast({ title: 'Ê∑ªÂä†ÂÆ¢Êà∑ÔºàÂæÖÊé•ÂêéÁ´ØÔºâ', icon: 'none' }) },\n    openCalendar() { uni.showToast({ title: 'È¢ÑÁ∫¶Êó•ÂéÜÔºàÂæÖÊé•ÂêéÁ´ØÔºâ', icon: 'none' }) },\n    goEdit() { uni.navigateTo({ url: `/pages/my-shops/edit?id=${this.id}` }) },\n    goCustomers() {\n      uni.navigateTo({ url: `/pages/my-customers/index?store_id=${this.id}` })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.page { min-height:100vh; background:#f6f7f9; padding-bottom:24px; }\n.nav-gap { height: 8px; }\n.hero { padding:16px; }\n.hero-img { width:100%; height:180px; border-radius:16px; background:#f2f2f2; }\n.card { margin:0 16px 12px; background:#fff; border-radius:16px; padding:16px; box-shadow:0 4px 12px rgba(0,0,0,0.04); }\n.shop-name { font-size:16px; font-weight:600; color:#222; margin-bottom:8px; }\n.row { display:flex; align-items:center; gap:8px; padding:8px 0; border-bottom:1px solid #f3f3f3; }\n.customers-row { justify-content:space-between; }\n.row-left { display:flex; align-items:center; gap:8px; flex:1; }\n.row:last-child { border-bottom:none; }\n.icon { width:20px; text-align:center; }\n.label { color:#8a8a8a; font-size:12px; width:72px; }\n.val { color:#333; font-size:14px; flex:1; }\n.mini-btn { border:1px solid #eedfc4; color:#caa265; border-radius:16px; padding:0 12px; height:32px; line-height:32px; background:#fff; }\n.section-title { font-size:14px; font-weight:600; color:#333; margin-bottom:8px; }\n.chart-placeholder { height:140px; border-radius:12px; background:#fafafa; display:flex; align-items:center; justify-content:center; color:#b8b8b8; }\n.cta { margin:16px; display:flex; flex-direction:column; gap:12px; }\n.btn { height:44px; border-radius:12px; font-size:16px; }\n.primary { background:#caa265; color:#fff; }\n.ghost { background:#fff; color:#333; border:1px solid #eee; }\n.edit-btn { position: fixed; right: 16px; top: 8px; color:#caa265; padding:8px 12px; z-index: 11; background:#fff; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.06); }\n</style>\n","import MiniProgramPage from '/Users/zhouzhongwei/Documents/HBuilderProjects/be-crm-main/pages/my-shops/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni","fetchCustomers"],"mappings":";;;AAwDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,IAAI;AAAA,MACJ,MAAM;AAAA,QACJ,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,aAAa;AAAA,QACb,eAAe;AAAA,QACf,gBAAgB;AAAA,QAChB,OAAO;AAAA,QACP,gBAAgB;AAAA,QAChB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACD;AAAA,EACD,UAAU;AACR,SAAK,UAAUA,iBAAS,aAAa,YAAY;AAAA,EAClD;AAAA,EACD,OAAO,OAAO;AACZ,SAAK,KAAM,SAAS,MAAM,MAAO;AACjCC,kBAAAA,MAAI,sBAAsB,EAAE,OAAO,QAAQ;AAC3C,QAAI,CAAC,KAAK,IAAI;AACZA,oBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C;AAAA,IACF;AACA,SAAK,UAAU;AAAA,EAChB;AAAA,EACD,SAAS;AACP,QAAI,KAAK,IAAI;AACX,WAAK,UAAU;AAAA,IACjB;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,MAAM,YAAY;AAChB,UAAI;AACF,cAAM,OAAO,MAAM,KAAK,QAAQ,YAAY,KAAK,EAAE;AACnD,YAAI,MAAM;AACR,gBAAM,OAAO,EAAE,GAAG,KAAK;AACvB,cAAI;AACF,kBAAM,YAAY,MAAMC,6BAAe;AACvC,iBAAK,kBAAkB,aAAa,CAAE,GAAE,OAAO,OAAK,EAAE,aAAa,KAAK,EAAE,EAAE;AAAA,UAC9E,SAAS,GAAG;AACV,iBAAK,iBAAiB,KAAK,kBAAkB;AAAA,UAC/C;AACA,eAAK,OAAO;AACZ,cAAI,KAAK,YAAY;AACnBD,0BAAAA,MAAI,sBAAsB,EAAE,OAAO,KAAK,WAAS,CAAG;AAAA,UACtD;AAAA,eACK;AACLA,wBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAAA,QAClD;AAAA,MACA,SAAO,KAAK;AACZA,sBAAAA,MAAI,UAAU,EAAE,QAAO,2BAAK,YAAU,2BAAK,YAAW,QAAQ,MAAM,QAAQ;AAAA,MAC9E;AAAA,IACD;AAAA,IACD,cAAc;AAAEA,oBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,OAAK,CAAG;AAAA,IAAG;AAAA,IACtE,eAAe;AAAEA,oBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,OAAO,CAAC;AAAA,IAAG;AAAA,IACvE,SAAS;AAAEA,oBAAAA,MAAI,WAAW,EAAE,KAAK,2BAA2B,KAAK,EAAE,GAAG,CAAC;AAAA,IAAG;AAAA,IAC1E,cAAc;AACZA,0BAAI,WAAW,EAAE,KAAK,sCAAsC,KAAK,EAAE,IAAI;AAAA,IACzE;AAAA,EACF;AACF;;;;;;;;;;;;;;;;ACtHA,GAAG,WAAW,eAAe;"}