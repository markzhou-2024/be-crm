{"version":3,"file":"create.js","sources":["pages/my-shops/create.vue","../../../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXktc2hvcHMvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"page form\">\n    <view class=\"field\">\n      <text class=\"label\">门店名称（必填）</text>\n      <input class=\"input\" v-model=\"form.store_name\" placeholder=\"请输入门店名称\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">门店地址（必填）</text>\n      <input class=\"input\" v-model=\"form.store_address\" placeholder=\"请输入门店地址\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">联系电话</text>\n      <input class=\"input\" v-model=\"form.phone\" placeholder=\"示例：021-6288-8888\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">营业时间</text>\n      <input class=\"input\" v-model=\"form.business_hours\" placeholder=\"10:00 - 22:00\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">封面图 URL</text>\n      <input class=\"input\" v-model=\"form.cover_image\" placeholder=\"https://...\" />\n    </view>\n\n    <view class=\"btns\">\n      <button class=\"btn primary\" :loading=\"submitting\" @tap=\"submit\">保存</button>\n      <button class=\"btn ghost\" :disabled=\"submitting\" @tap=\"cancel\">取消</button>\n    </view>\n  </view>\n</template>\n\n<script>\n// @ts-nocheck\nimport { loadShops, saveShops } from '@/utils/shopsStore.js'\n\nexport default {\n  data() {\n    return {\n      submitting: false,\n      form: {\n        store_name: '',\n        store_address: '',\n        phone: '',\n        business_hours: '10:00 - 22:00',\n        cover_image: '',\n        status: 'active'\n      }\n    }\n  },\n  methods: {\n    async submit() {\n      if (this.submitting) return\n      if (!this.form.store_name || !this.form.store_address) {\n        uni.showToast({ title: '请填写必填项', icon: 'none' })\n        return\n      }\n      this.submitting = true\n      const service = uniCloud.importObject('curd-shops')\n      try {\n        const res = await service.createShop({ ...this.form })\n        const created = res?.data || {}\n        const local = loadShops([])\n        const record = created._id ? created : {\n          ...this.form,\n          _id: created._id || Date.now().toString()\n        }\n        const idx = local.findIndex(item => item._id === record._id)\n        if (idx >= 0) {\n          local.splice(idx, 1, record)\n        } else {\n          local.unshift(record)\n        }\n        saveShops(local)\n        uni.showToast({ title: '创建成功', icon: 'success' })\n        setTimeout(() => uni.navigateBack(), 400)\n      } catch (err) {\n        uni.showToast({ title: err?.errMsg || err?.message || '保存失败', icon: 'none' })\n      } finally {\n        this.submitting = false\n      }\n    },\n    cancel() {\n      if (!this.submitting) {\n        uni.navigateBack()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.form { padding:16px; }\n.field { margin-bottom:12px; }\n.label { display:block; color:#666; font-size:12px; margin-bottom:6px; }\n.input { height:40px; background:#fff; border-radius:10px; padding:0 12px; box-shadow:0 1px 2px rgba(0,0,0,0.06); }\n.btns { margin-top:20px; display:flex; flex-direction:column; gap:12px; }\n.btn { height:44px; border-radius:12px; font-size:16px; }\n.primary { background:#caa265; color:#fff; }\n.ghost { background:#fff; color:#333; border:1px solid #eee; }\n</style>\n","import MiniProgramPage from 'D:/移动云盘同步盘/hua-应用/be-crm/be-crm/be-crm/pages/my-shops/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","uni","service","uniCloud","res","created","local","loadShops","record","idx","item","saveShops","err","MiniProgramPage"],"mappings":"8FAsCKA,EAAU,CACb,MAAO,CACL,MAAO,CACL,WAAY,GACZ,KAAM,CACJ,WAAY,GACZ,cAAe,GACf,MAAO,GACP,eAAgB,gBAChB,YAAa,GACb,OAAQ,QACV,CACF,CACD,EACD,QAAS,CACP,MAAM,QAAS,CACb,GAAI,KAAK,WAAY,OACrB,GAAI,CAAC,KAAK,KAAK,YAAc,CAAC,KAAK,KAAK,cAAe,CACrDC,EAAG,MAAC,UAAU,CAAE,MAAO,SAAU,KAAM,OAAQ,EAC/C,MACF,CACA,KAAK,WAAa,GAClB,MAAMC,EAAUC,EAAAA,GAAS,aAAa,YAAY,EAClD,GAAI,CACF,MAAMC,EAAM,MAAMF,EAAQ,WAAW,CAAE,GAAG,KAAK,KAAM,EAC/CG,GAAUD,GAAA,YAAAA,EAAK,OAAQ,CAAC,EACxBE,EAAQC,EAAS,UAAC,EAAE,EACpBC,EAASH,EAAQ,IAAMA,EAAU,CACrC,GAAG,KAAK,KACR,IAAKA,EAAQ,KAAO,KAAK,IAAG,EAAG,SAAS,CAC1C,EACMI,EAAMH,EAAM,UAAUI,GAAQA,EAAK,MAAQF,EAAO,GAAG,EACvDC,GAAO,EACTH,EAAM,OAAOG,EAAK,EAAGD,CAAM,EAE3BF,EAAM,QAAQE,CAAM,EAEtBG,EAAAA,UAAUL,CAAK,EACfL,EAAG,MAAC,UAAU,CAAE,MAAO,OAAQ,KAAM,UAAW,EAChD,WAAW,IAAMA,EAAAA,MAAI,aAAY,EAAI,GAAG,CACxC,OAAOW,EAAK,CACZX,EAAAA,MAAI,UAAU,CAAE,OAAOW,GAAA,YAAAA,EAAK,UAAUA,GAAA,YAAAA,EAAK,UAAW,OAAQ,KAAM,OAAQ,CAC9E,QAAU,CACR,KAAK,WAAa,EACpB,CACD,EACD,QAAS,CACF,KAAK,YACRX,EAAAA,MAAI,aAAa,CAErB,CACF,CACF,yhBCzFA,GAAG,WAAWY,CAAe"}