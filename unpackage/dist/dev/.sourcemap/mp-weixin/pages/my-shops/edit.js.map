{"version":3,"file":"edit.js","sources":["pages/my-shops/edit.vue","pages/my-shops/edit.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page form\">\n    <view class=\"field\">\n      <text class=\"label\">门店名称（必填）</text>\n      <input class=\"input\" v-model=\"form.store_name\" placeholder=\"请输入门店名称\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">门店地址（必填）</text>\n      <input class=\"input\" v-model=\"form.store_address\" placeholder=\"请输入门店地址\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">联系电话</text>\n      <input class=\"input\" v-model=\"form.phone\" placeholder=\"示例：021-6288-8888\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">营业时间</text>\n      <input class=\"input\" v-model=\"form.business_hours\" placeholder=\"10:00 - 22:00\" />\n    </view>\n\n    <view class=\"field\">\n      <text class=\"label\">封面图 URL</text>\n      <input class=\"input\" v-model=\"form.cover_image\" placeholder=\"https://...\" />\n    </view>\n\n    <view class=\"btns\">\n      <button class=\"btn primary\" :loading=\"submitting\" @tap=\"submit\">保存</button>\n      <button class=\"btn ghost\" :disabled=\"submitting\" @tap=\"cancel\">取消</button>\n    </view>\n  </view>\n</template>\n\n<script>\n// @ts-nocheck\nexport default {\n  data() {\n    return {\n      id: '',\n      submitting: false,\n      form: {\n        _id: '',\n        store_name: '',\n        store_address: '',\n        phone: '',\n        business_hours: '10:00 - 22:00',\n        cover_image: '',\n        status: 'active'\n      }\n    }\n  },\n  created() {\n    this.service = uniCloud.importObject('curd-shops')\n  },\n  onLoad(query) {\n    this.id = (query && query.id) || ''\n    if (!this.id) {\n      uni.showToast({ title: '缺少门店ID', icon: 'none' })\n      setTimeout(() => uni.navigateBack(), 400)\n      return\n    }\n    this.loadData()\n  },\n  methods: {\n    async loadData() {\n      try {\n        const data = await this.service.getShopById(this.id)\n        if (!data) {\n          uni.showToast({ title: '记录不存在', icon: 'none' })\n          setTimeout(() => uni.navigateBack(), 400)\n          return\n        }\n        this.form = { ...data }\n      } catch (err) {\n        uni.showToast({ title: err?.errMsg || err?.message || '加载失败', icon: 'none' })\n      }\n    },\n    async submit() {\n      if (this.submitting) return\n      if (!this.form.store_name || !this.form.store_address) {\n        uni.showToast({ title: '请填写必填项', icon: 'none' })\n        return\n      }\n      this.submitting = true\n      try {\n        await this.service.updateShop(this.form)\n        uni.showToast({ title: '保存成功', icon: 'success' })\n        setTimeout(() => uni.navigateBack(), 400)\n      } catch (err) {\n        uni.showToast({ title: err?.errMsg || err?.message || '保存失败', icon: 'none' })\n      } finally {\n        this.submitting = false\n      }\n    },\n    cancel() {\n      if (!this.submitting) {\n        uni.navigateBack()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.form { padding:16px; }\n.field { margin-bottom:12px; }\n.label { display:block; color:#666; font-size:12px; margin-bottom:6px; }\n.input { height:40px; background:#fff; border-radius:10px; padding:0 12px; box-shadow:0 1px 2px rgba(0,0,0,0.06); }\n.btns { margin-top:20px; display:flex; flex-direction:column; gap:12px; }\n.btn { height:44px; border-radius:12px; font-size:16px; }\n.primary { background:#caa265; color:#fff; }\n.ghost { background:#fff; color:#333; border:1px solid #eee; }\n</style>\n","import MiniProgramPage from '/Users/zhouzhongwei/Documents/HBuilderProjects/be-crm-main/pages/my-shops/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":";;AAoCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,IAAI;AAAA,MACJ,YAAY;AAAA,MACZ,MAAM;AAAA,QACJ,KAAK;AAAA,QACL,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,OAAO;AAAA,QACP,gBAAgB;AAAA,QAChB,aAAa;AAAA,QACb,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACD;AAAA,EACD,UAAU;AACR,SAAK,UAAUA,iBAAS,aAAa,YAAY;AAAA,EAClD;AAAA,EACD,OAAO,OAAO;AACZ,SAAK,KAAM,SAAS,MAAM,MAAO;AACjC,QAAI,CAAC,KAAK,IAAI;AACZC,oBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C,iBAAW,MAAMA,cAAAA,MAAI,aAAY,GAAI,GAAG;AACxC;AAAA,IACF;AACA,SAAK,SAAS;AAAA,EACf;AAAA,EACD,SAAS;AAAA,IACP,MAAM,WAAW;AACf,UAAI;AACF,cAAM,OAAO,MAAM,KAAK,QAAQ,YAAY,KAAK,EAAE;AACnD,YAAI,CAAC,MAAM;AACTA,wBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,QAAQ;AAC9C,qBAAW,MAAMA,cAAAA,MAAI,aAAY,GAAI,GAAG;AACxC;AAAA,QACF;AACA,aAAK,OAAO,EAAE,GAAG,KAAK;AAAA,MACtB,SAAO,KAAK;AACZA,sBAAAA,MAAI,UAAU,EAAE,QAAO,2BAAK,YAAU,2BAAK,YAAW,QAAQ,MAAM,QAAQ;AAAA,MAC9E;AAAA,IACD;AAAA,IACD,MAAM,SAAS;AACb,UAAI,KAAK;AAAY;AACrB,UAAI,CAAC,KAAK,KAAK,cAAc,CAAC,KAAK,KAAK,eAAe;AACrDA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C;AAAA,MACF;AACA,WAAK,aAAa;AAClB,UAAI;AACF,cAAM,KAAK,QAAQ,WAAW,KAAK,IAAI;AACvCA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,WAAW;AAChD,mBAAW,MAAMA,cAAAA,MAAI,aAAY,GAAI,GAAG;AAAA,MACxC,SAAO,KAAK;AACZA,sBAAAA,MAAI,UAAU,EAAE,QAAO,2BAAK,YAAU,2BAAK,YAAW,QAAQ,MAAM,QAAQ;AAAA,MAC9E,UAAU;AACR,aAAK,aAAa;AAAA,MACpB;AAAA,IACD;AAAA,IACD,SAAS;AACP,UAAI,CAAC,KAAK,YAAY;AACpBA,sBAAAA,MAAI,aAAa;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;ACpGA,GAAG,WAAW,eAAe;"}