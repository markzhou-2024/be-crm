{"version":3,"file":"create.js","sources":["pages/purchases/create.vue","../../../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVyY2hhc2VzL2NyZWF0ZS52dWU"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"header\">\n      <text class=\"title\">新增购买</text>\n      <text class=\"subtitle\">{{ customerName ? `客户：${customerName}` : '' }}</text>\n    </view>\n\n    <scroll-view class=\"form\" scroll-y>\n      <view class=\"field required\">\n        <text class=\"label\">套餐名称</text>\n        <input class=\"input\" v-model=\"form.package_name\" placeholder=\"请输入套餐名称\" />\n      </view>\n\n      <view class=\"field required\">\n        <text class=\"label\">服务次数</text>\n        <input class=\"input\" v-model=\"form.service_times\" type=\"number\" placeholder=\"请输入正整数\" />\n      </view>\n\n      <view class=\"field required\">\n        <text class=\"label\">费用（元）</text>\n        <input class=\"input\" v-model=\"form.amount\" type=\"number\" placeholder=\"0.00\" />\n      </view>\n\n      <view class=\"field\">\n        <text class=\"label\">备注</text>\n        <textarea class=\"textarea\" v-model=\"form.remark\" placeholder=\"可记录购买备注\" />\n      </view>\n    </scroll-view>\n\n    <view class=\"actions\">\n      <button class=\"btn ghost\" @tap=\"cancel\">取消</button>\n      <button class=\"btn primary\" @tap=\"submit\">保存</button>\n    </view>\n  </view>\n</template>\n\n<script>\n// @ts-nocheck\nexport default {\n  data() {\n    return {\n      customerId: '',\n      customerName: '',\n      form: {\n        package_name: '',\n        service_times: '',\n        amount: '',\n        remark: ''\n      }\n    }\n  },\n  onLoad() {\n    const channel = this.getOpenerEventChannel && this.getOpenerEventChannel()\n    if (channel) {\n      channel.on('initCustomerInfo', payload => {\n        this.customerId = payload?.customerId || ''\n        this.customerName = payload?.customerName || ''\n      })\n      this.eventChannel = channel\n    }\n  },\n  methods: {\n    cancel() {\n      uni.navigateBack()\n    },\n    validate() {\n      if (!this.form.package_name.trim()) {\n        uni.showToast({ title: '请输入套餐名称', icon: 'none' })\n        return false\n      }\n      const times = Number(this.form.service_times)\n      if (!Number.isInteger(times) || times <= 0) {\n        uni.showToast({ title: '服务次数须为正整数', icon: 'none' })\n        return false\n      }\n      const amount = Number(this.form.amount)\n      if (isNaN(amount) || amount < 0 || !/^\\d+(\\.\\d{1,2})?$/.test(this.form.amount)) {\n        uni.showToast({ title: '费用格式不正确', icon: 'none' })\n        return false\n      }\n      this.form.service_times = times\n      this.form.amount = amount\n      return true\n    },\n    submit() {\n      if (!this.validate()) return\n      const payload = {\n        customer_id: this.customerId,\n        package_name: this.form.package_name.trim(),\n        service_times: this.form.service_times,\n        amount: this.form.amount,\n        remark: this.form.remark.trim()\n      }\n      console.log('purchase payload', payload)\n      if (this.eventChannel) {\n        this.eventChannel.emit('purchaseCreated', payload)\n      }\n      uni.navigateBack()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.page { min-height:100vh; background:#f6f7f9; display:flex; flex-direction:column; }\n.header { padding:16px; }\n.title { font-size:20px; font-weight:600; color:#222; }\n.subtitle { display:block; margin-top:4px; color:#999; font-size:12px; }\n.form { flex:1; padding:16px; box-sizing:border-box; }\n.field { margin-bottom:14px; background:#fff; border-radius:16px; padding:12px 16px; box-shadow:0 1px 4px rgba(0,0,0,0.04); }\n.field.required .label::after { content:'*'; color:#dd524d; margin-left:4px; }\n.label { display:block; font-size:13px; color:#9a9aa0; margin-bottom:6px; }\n.input { font-size:15px; color:#333; }\n.textarea { width:100%; min-height:90px; font-size:15px; color:#333; }\n.actions { padding:16px; display:flex; gap:12px; }\n.btn { flex:1; height:46px; border-radius:24px; font-size:16px; }\n.primary { background:#caa265; color:#fff; }\n.ghost { background:#fff; color:#333; border:1px solid #eee; }\n</style>\n","import MiniProgramPage from 'D:/移动云盘同步盘/hua-应用/be-crm/be-crm/be-crm/pages/purchases/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","channel","payload","uni","times","amount","MiniProgramPage"],"mappings":"uDAsCKA,EAAU,CACb,MAAO,CACL,MAAO,CACL,WAAY,GACZ,aAAc,GACd,KAAM,CACJ,aAAc,GACd,cAAe,GACf,OAAQ,GACR,OAAQ,EACV,CACF,CACD,EACD,QAAS,CACP,MAAMC,EAAU,KAAK,uBAAyB,KAAK,sBAAsB,EACrEA,IACFA,EAAQ,GAAG,mBAAoBC,GAAW,CACxC,KAAK,YAAaA,GAAA,YAAAA,EAAS,aAAc,GACzC,KAAK,cAAeA,GAAA,YAAAA,EAAS,eAAgB,GAC9C,EACD,KAAK,aAAeD,EAEvB,EACD,QAAS,CACP,QAAS,CACPE,EAAAA,MAAI,aAAa,CAClB,EACD,UAAW,CACT,GAAI,CAAC,KAAK,KAAK,aAAa,KAAI,EAC9BA,OAAAA,EAAG,MAAC,UAAU,CAAE,MAAO,UAAW,KAAM,OAAQ,EACzC,GAET,MAAMC,EAAQ,OAAO,KAAK,KAAK,aAAa,EAC5C,GAAI,CAAC,OAAO,UAAUA,CAAK,GAAKA,GAAS,EACvCD,OAAAA,EAAG,MAAC,UAAU,CAAE,MAAO,YAAa,KAAM,OAAQ,EAC3C,GAET,MAAME,EAAS,OAAO,KAAK,KAAK,MAAM,EACtC,OAAI,MAAMA,CAAM,GAAKA,EAAS,GAAK,CAAC,oBAAoB,KAAK,KAAK,KAAK,MAAM,GAC3EF,EAAG,MAAC,UAAU,CAAE,MAAO,UAAW,KAAM,OAAQ,EACzC,KAET,KAAK,KAAK,cAAgBC,EAC1B,KAAK,KAAK,OAASC,EACZ,GACR,EACD,QAAS,CACP,GAAI,CAAC,KAAK,SAAQ,EAAI,OACtB,MAAMH,EAAU,CACd,YAAa,KAAK,WAClB,aAAc,KAAK,KAAK,aAAa,KAAM,EAC3C,cAAe,KAAK,KAAK,cACzB,OAAQ,KAAK,KAAK,OAClB,OAAQ,KAAK,KAAK,OAAO,KAAK,CAChC,EACAC,EAAAA,MAAY,MAAA,MAAA,mCAAA,mBAAoBD,CAAO,EACnC,KAAK,cACP,KAAK,aAAa,KAAK,kBAAmBA,CAAO,EAEnDC,EAAAA,MAAI,aAAa,CACnB,CACF,CACF,geCnGA,GAAG,WAAWG,CAAe"}