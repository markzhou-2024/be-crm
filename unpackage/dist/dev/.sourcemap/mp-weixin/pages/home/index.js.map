{"version":3,"file":"index.js","sources":["pages/home/index.vue","pages/home/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"greet\">‰ªäÂ§©‰πüË¶ÅÂä†Ê≤πÂì¶ ‚ú®</view>\n\n    <view class=\"grid\">\n      <stat-tile icon=\"üè™\" :value=\"stats.store_count\" label=\"Èó®Â∫óÊï∞\" />\n      <stat-tile icon=\"üë•\" :iconColor=\"'#20C997'\" :value=\"fmtNum(stats.customer_count)\" label=\"ÂÆ¢Êà∑Êï∞\" />\n      <stat-tile icon=\"ÔºÑ\" :iconColor=\"'#C8A675'\" :value=\"'¬•' + kfmt(stats.month_sales)\" label=\"Êú¨ÊúàÈîÄÂîÆÈ¢ù\" />\n      <stat-tile icon=\"üé´\" :value=\"fmtNum(stats.month_consume_count)\" label=\"Êú¨ÊúàÊ∂àËÄóÊ¨°Êï∞\" />\n    </view>\n\n    <section-header title=\"‰ªäÊó•È¢ÑÁ∫¶\" linkText=\"Êü•ÁúãÂÖ®ÈÉ®\" @more=\"goAll\" />\n    <app-card :padding=\"'4px 6px'\">\n      <appointment-item\n        v-for=\"i in todayList\"\n        :key=\"i.id\"\n        :time=\"i.time\"\n        :name=\"i.name\"\n        :service=\"i.service\"\n        :store=\"i.store\"\n        @click=\"goDetail(i)\"\n      />\n      <view v-if=\"!todayList.length\" class=\"empty\">‰ªäÂ§©ÊöÇÊó†È¢ÑÁ∫¶</view>\n    </app-card>\n  </view>\n</template>\n\n<script>\nimport AppCard from '@/src/components/ui/AppCard.vue'\nimport SectionHeader from '@/src/components/ui/SectionHeader.vue'\nimport StatTile from '@/src/components/metrics/StatTile.vue'\nimport AppointmentItem from '@/src/components/appointment/AppointmentItem.vue'\nimport { getHomeStats, getTodayAppointments } from '@/src/services/home.js'\n\nexport default {\n  name: 'HomePage',\n  components: { AppCard, SectionHeader, StatTile, AppointmentItem },\n  data () {\n    return {\n      stats: {\n        store_count: 0,\n        customer_count: 0,\n        month_sales: 0,\n        month_consume_count: 0\n      },\n      todayList: []\n    }\n  },\n  async onShow () {\n    await Promise.all([this.loadStats(), this.loadToday()])\n  },\n  methods: {\n    async loadStats () {\n      this.stats = await getHomeStats()\n    },\n    async loadToday () {\n      this.todayList = await getTodayAppointments()\n    },\n    kfmt (n) {\n      const v = Number(n || 0)\n      return v >= 1000 ? Math.round(v / 1000) + 'K' : v\n    },\n    fmtNum (n) {\n      return Number(n || 0).toLocaleString('zh-CN')\n    },\n    goAll () {\n      uni.navigateTo({ url: '/pages/bookings/index' })\n    },\n    goDetail (item) {\n      uni.navigateTo({ url: `/pages/appointments/detail?id=${item.id}` })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.page { min-height:100vh; background:#F7F7F7; padding:16px; box-sizing:border-box; }\n.greet { color:#111; font-weight:600; font-size:18px; margin:4px 0 14px; }\n.grid { display:grid; grid-template-columns:1fr 1fr; grid-gap:12px; margin-bottom:14px; }\n.empty { text-align:center; color:#6F6F73; font-size:13px; padding:18px 0; }\n</style>\n","import MiniProgramPage from '/Users/zhouzhongwei/Documents/HBuilderProjects/be-crm-main/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getHomeStats","getTodayAppointments","uni"],"mappings":";;;AA4BA,gBAAgB,MAAW;AAC3B,MAAK,gBAAiB,MAAW;AACjC,MAAK,WAAY,MAAW;AAC5B,wBAAwB,MAAW;AAGnC,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,YAAY,EAAE,SAAS,eAAe,UAAU,gBAAiB;AAAA,EACjE,OAAQ;AACN,WAAO;AAAA,MACL,OAAO;AAAA,QACL,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,aAAa;AAAA,QACb,qBAAqB;AAAA,MACtB;AAAA,MACD,WAAW,CAAC;AAAA,IACd;AAAA,EACD;AAAA,EACD,MAAM,SAAU;AACd,UAAM,QAAQ,IAAI,CAAC,KAAK,UAAS,GAAI,KAAK,UAAS,CAAE,CAAC;AAAA,EACvD;AAAA,EACD,SAAS;AAAA,IACP,MAAM,YAAa;AACjB,WAAK,QAAQ,MAAMA,+BAAa;AAAA,IACjC;AAAA,IACD,MAAM,YAAa;AACjB,WAAK,YAAY,MAAMC,uCAAqB;AAAA,IAC7C;AAAA,IACD,KAAM,GAAG;AACP,YAAM,IAAI,OAAO,KAAK,CAAC;AACvB,aAAO,KAAK,MAAO,KAAK,MAAM,IAAI,GAAI,IAAI,MAAM;AAAA,IACjD;AAAA,IACD,OAAQ,GAAG;AACT,aAAO,OAAO,KAAK,CAAC,EAAE,eAAe,OAAO;AAAA,IAC7C;AAAA,IACD,QAAS;AACPC,oBAAAA,MAAI,WAAW,EAAE,KAAK,yBAAyB;AAAA,IAChD;AAAA,IACD,SAAU,MAAM;AACdA,0BAAI,WAAW,EAAE,KAAK,iCAAiC,KAAK,EAAE,IAAI;AAAA,IACpE;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvEA,GAAG,WAAW,eAAe;"}