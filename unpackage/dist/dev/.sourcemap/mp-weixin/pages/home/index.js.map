{"version":3,"file":"index.js","sources":["pages/home/index.vue","pages/home/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"greet-row\">\n      <view class=\"greet\">今天也要加油哦 ✨</view>\n    </view>\n\n    <view class=\"tasks-section\">\n      <text class=\"tasks-title\">{{ selectedDateLabel }}</text>\n      <text class=\"tasks-hint\">长按编辑（自建日程），向右滑删除</text>\n      <app-card :padding=\"'0'\">\n        <view v-if=\"!dayTasks.length\" class=\"empty\">这天还没有安排，长按日期或再次点击单元格即可创建</view>\n        <view\n          v-for=\"task in dayTasks\"\n          :key=\"task.id\"\n          class=\"task-item\"\n          @longpress=\"editTask(task)\"\n          @touchstart=\"onTaskTouchStart($event, task)\"\n          @touchend=\"onTaskTouchEnd($event, task)\"\n        >\n          <view class=\"task-main\">\n            <text class=\"task-time\">{{ task.time }}</text>\n            <view class=\"task-body\">\n                         <text v-if=\"task.store_name\" class=\"task-store\">{{ task.store_name }}</text>\n              <text v-if=\"task.note\" class=\"task-note\">{{ task.note }}</text>\n            </view>\n          </view>\n        </view>\n      </app-card>\n    </view>\n\n    <view class=\"calendar-card\">\n      <view class=\"calendar-top\">\n        <button class=\"nav-btn\" @tap=\"changeMonth(-1)\">‹</button>\n        <view class=\"month-title\">{{ displayMonth }}</view>\n        <button class=\"nav-btn\" @tap=\"changeMonth(1)\">›</button>\n      </view>\n      <view class=\"week-row\">\n        <text v-for=\"day in weekLabels\" :key=\"day\">{{ day }}</text>\n      </view>\n      <view class=\"day-grid\">\n        <view\n          v-for=\"day in calendarDays\"\n          :key=\"day.date\"\n          class=\"day-cell\"\n          :class=\"{ dim: !day.inMonth, today: day.isToday, selected: day.date === selectedDate, busy: day.count }\"\n          @tap=\"selectDate(day)\"\n          @longpress=\"quickCreate(day)\"\n        >\n          <view class=\"day-head\">\n            <text class=\"day-num\">{{ day.day }}</text>\n            <text class=\"pill-today\" v-if=\"day.isToday\">今</text>\n          </view>\n          <view class=\"pill-group\">\n            <text class=\"pill\" v-for=\"(pill, idx) in day.pills\" :key=\"idx\">{{ shortPill(pill) }}</text>\n            <text class=\"pill more\" v-if=\"day.more\">+{{ day.more }}</text>\n          </view>\n        </view>\n      </view>\n      <text class=\"calendar-hint\">点击日期切换，再次点击或长按单元格可新建任务</text>\n    </view>\n\n    <view v-if=\"formVisible\" class=\"form-mask\">\n      <view class=\"form-card\">\n        <view class=\"form-title\">{{ editingTaskId ? '编辑任务' : '创建任务' }}</view>\n        <view class=\"form-field\">\n          <text class=\"field-label\">日期</text>\n          <text class=\"field-value\">{{ selectedDate }}</text>\n        </view>\n        <view class=\"form-field\">\n          <text class=\"field-label\">门店</text>\n          <picker\n            class=\"store-picker\"\n            mode=\"selector\"\n            :range=\"storeOptions\"\n            range-key=\"label\"\n            :value=\"storePickerIndex\"\n            @change=\"onStoreChange\"\n          >\n            <view class=\"picker-value\">{{ storeOptions[storePickerIndex]?.label || '请选择门店' }}</view>\n          </picker>\n        </view>\n        <view class=\"form-field\">\n          <text class=\"field-label\">时间</text>\n          <picker mode=\"time\" :value=\"formData.time\" @change=\"onTimeChange\">\n            <view class=\"picker-value\">{{ formData.time }}</view>\n          </picker>\n        </view>\n        <view class=\"form-field\">\n          <text class=\"field-label\">备注</text>\n          <textarea class=\"field-textarea\" v-model=\"formData.note\" placeholder=\"可填写提醒内容\"></textarea>\n        </view>\n        <view class=\"form-actions\">\n          <button class=\"ghost\" @tap=\"closeForm\">取消</button>\n          <button class=\"primary\" @tap=\"submitTask\">{{ editingTaskId ? '保存' : '创建' }}</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nconst pad = (value) => `${value}`.padStart(2, '0')\nfunction formatDateValue (date) {\n  const d = new Date(date)\n  const y = d.getFullYear()\n  return `${y}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`\n}\nfunction formatMonthValue (date) {\n  const d = new Date(date)\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}`\n}\n\nimport AppCard from '@/src/components/ui/AppCard.vue'\nimport { fetchShopHistory } from '@/api/shops.js'\nimport { listAllTasks, createTask, updateTask, deleteTask } from '@/src/services/schedule.js'\n\nexport default {\n  name: 'HomePage',\n  components: { AppCard },\n  data () {\n    const today = formatDateValue(new Date())\n    return {\n      weekLabels: ['一', '二', '三', '四', '五', '六', '日'],\n      currentMonth: formatMonthValue(new Date()),\n      displayMonth: '',\n      calendarDays: [],\n      selectedDate: today,\n      dayTasks: [],\n      allTasks: [],\n      formVisible: false,\n      formData: { title: '日程安排', time: '09:00', note: '', store_id: '', store_name: '' },\n      editingTaskId: '',\n      storeOptions: [{ label: '请选择门店', value: '' }],\n      storePickerIndex: 0,\n      touchState: null,\n      calendarRange: { start: 0, end: 0 }\n    }\n  },\n  async onShow () {\n    await this.ensureStores()\n    await this.refreshTasks()\n  },\n  methods: {\n    formatPillLabel (text) {\n      const source = (text || '').trim() || '待办'\n      const glyphs = Array.from(source)\n      return glyphs.slice(0, 3).join('')\n    },\n    formatDate (date) {\n      return formatDateValue(date)\n    },\n    formatMonth (date) {\n      return formatMonthValue(date)\n    },\n    calcCalendarRange () {\n      const [year, month] = this.currentMonth.split('-').map(n => Number(n))\n      const firstDay = new Date(year, month - 1, 1)\n      const start = new Date(firstDay)\n      const offset = (firstDay.getDay() + 6) % 7\n      start.setDate(firstDay.getDate() - offset)\n      const end = new Date(start)\n      end.setDate(start.getDate() + 42)\n      return { start, end }\n    },\n    async refreshTasks () {\n      const range = this.calcCalendarRange()\n      this.calendarRange = { start: range.start.getTime(), end: range.end.getTime() }\n      try {\n        this.allTasks = await listAllTasks({ start: this.calendarRange.start, end: this.calendarRange.end })\n      } catch (err) {\n        console.log('load calendar failed', err)\n        this.allTasks = []\n        const msg = err?.code === 401 || err?.errCode === 401\n          ? '请登录后查看日程'\n          : (err?.message || '加载日历失败')\n        uni.showToast({ title: msg, icon: 'none' })\n      }\n      this.buildCalendar(range)\n      this.loadDayTasks()\n    },\n    async ensureStores () {\n      if (this.storeOptions.length > 1) return\n      try {\n        const list = await fetchShopHistory()\n        const mapped = list.map(item => ({\n          label: item.store_name || item.name,\n          value: item._id || item.id\n        }))\n        this.storeOptions = [{ label: '请选择门店', value: '' }, ...mapped]\n      } catch (err) {\n        console.log('fetch shops failed', err)\n        this.storeOptions = [{ label: '请选择门店', value: '' }]\n      }\n    },\n    buildCalendar (range) {\n      const ref = range || this.calcCalendarRange()\n      const start = new Date(ref.start)\n      const [year, month] = this.currentMonth.split('-').map(n => Number(n))\n      const today = this.formatDate(new Date())\n      const taskMap = this.allTasks.reduce((acc, task) => {\n        const list = acc[task.date] || []\n        list.push(task)\n        acc[task.date] = list\n        return acc\n      }, {})\n      const days = []\n      for (let i = 0; i < 42; i += 1) {\n        const current = new Date(start)\n        current.setDate(start.getDate() + i)\n        const dateStr = this.formatDate(current)\n        const dayTasks = taskMap[dateStr] || []\n        const pills = dayTasks.slice(0, 2).map(item => this.formatPillLabel(item.store_name || item.title || '待办'))\n        days.push({\n          date: dateStr,\n          day: current.getDate(),\n          inMonth: current.getMonth() === (month - 1) && current.getFullYear() === year,\n          isToday: dateStr === today,\n          count: dayTasks.length,\n          pills,\n          more: Math.max(dayTasks.length - pills.length, 0)\n        })\n      }\n      this.displayMonth = `${year}年${String(month).padStart(2, '0')}月`\n      this.calendarDays = days\n      if (this.selectedDate.slice(0, 7) !== this.currentMonth) {\n        this.selectedDate = this.formatDate(new Date(year, month - 1, 1))\n      }\n    },\n    loadDayTasks () {\n      const list = this.allTasks\n        .filter(item => item.date === this.selectedDate)\n        .sort((a, b) => (a.time || '').localeCompare(b.time || ''))\n      this.dayTasks = list\n    },\n    async changeMonth (step) {\n      const [year, month] = this.currentMonth.split('-').map(n => Number(n))\n      const next = new Date(year, month - 1 + step, 1)\n      this.currentMonth = this.formatMonth(next)\n      await this.refreshTasks()\n    },\n    async selectDate (day) {\n      const same = this.selectedDate === day.date\n      this.selectedDate = day.date\n      this.loadDayTasks()\n      if (same) {\n        await this.openTaskForm()\n      }\n    },\n    async quickCreate (day) {\n      this.selectedDate = day.date\n      this.loadDayTasks()\n      await this.openTaskForm()\n    },\n    async openTaskForm (task) {\n      await this.ensureStores()\n      this.formVisible = true\n      if (task) {\n        this.editingTaskId = task.id\n        this.formData = {\n          title: task.title || '日程安排',\n          time: task.time,\n          note: task.note || '',\n          store_id: task.store_id || '',\n          store_name: task.store_name || ''\n        }\n        let idx = this.storeOptions.findIndex(item => item.value === task.store_id)\n        if (task.store_id && idx === -1) {\n          this.storeOptions = [...this.storeOptions, { label: task.store_name || '已下线门店', value: task.store_id }]\n          idx = this.storeOptions.length - 1\n        }\n        this.setStorePickerIndex(idx >= 0 ? idx : 0)\n        if (!task.store_id) {\n          this.formData.store_id = ''\n          this.formData.store_name = ''\n        }\n      } else {\n        this.editingTaskId = ''\n        this.formData = { title: '日程安排', time: '09:00', note: '', store_id: '', store_name: '' }\n        this.setStorePickerIndex(0)\n      }\n    },\n    closeForm () {\n      this.formVisible = false\n      this.editingTaskId = ''\n      this.formData = { title: '日程安排', time: '09:00', note: '', store_id: '', store_name: '' }\n      this.setStorePickerIndex(0)\n    },\n    setStorePickerIndex (idx) {\n      const safeIdx = idx >= 0 ? idx : 0\n      this.storePickerIndex = safeIdx\n      const option = this.storeOptions[safeIdx]\n      if (option && option.value) {\n        this.formData.store_id = option.value\n        this.formData.store_name = option.label || ''\n      } else {\n        this.formData.store_id = ''\n        this.formData.store_name = ''\n      }\n    },\n    onStoreChange (e) {\n      const idx = Number(e?.detail?.value || 0)\n      this.setStorePickerIndex(idx)\n    },\n    onTimeChange (e) {\n      this.formData.time = e?.detail?.value || this.formData.time\n    },\n    onTaskTouchStart (e, task) {\n      if (!task.calendar_only) {\n        this.touchState = null\n        return\n      }\n      const touch = (e?.changedTouches && e.changedTouches[0]) || (e?.touches && e.touches[0])\n      if (!touch) return\n      this.touchState = {\n        x: touch.clientX,\n        y: touch.clientY,\n        taskId: task.id,\n        time: Date.now()\n      }\n    },\n    onTaskTouchEnd (e, task) {\n      const state = this.touchState\n      this.touchState = null\n      const touch = (e?.changedTouches && e.changedTouches[0]) || (e?.touches && e.touches?.[0])\n      if (!state || !touch || state.taskId !== task.id) return\n      if (!task.calendar_only) return\n      const deltaX = touch.clientX - state.x\n      const deltaY = Math.abs(touch.clientY - state.y)\n      const duration = Date.now() - state.time\n      if (deltaX > 60 && deltaY < 40 && duration < 800) {\n        this.removeTask(task)\n      }\n    },\n    async submitTask () {\n      const title = (this.formData.title || '日程安排').trim() || '日程安排'\n      const selectedOption = this.storeOptions[this.storePickerIndex]\n      const storeId = selectedOption?.value || ''\n      if (this.storeOptions.length > 1 && !storeId) {\n        uni.showToast({ title: '请选择门店', icon: 'none' })\n        return\n      }\n      const payload = {\n        title,\n        time: this.formData.time || '09:00',\n        note: (this.formData.note || '').trim(),\n        date: this.selectedDate,\n        store_id: storeId,\n        store_name: storeId ? (selectedOption?.label || '') : ''\n      }\n      const editing = !!this.editingTaskId\n      try {\n        if (editing) {\n          await updateTask(this.editingTaskId, payload)\n        } else {\n          await createTask(payload)\n        }\n        this.closeForm()\n        await this.refreshTasks()\n        uni.showToast({ title: editing ? '已更新' : '已创建', icon: 'none' })\n      } catch (err) {\n        uni.showToast({ title: err?.message || '保存失败', icon: 'none' })\n      }\n    },\n    editTask (task) {\n      if (!task.calendar_only) {\n        uni.showToast({ title: '请前往预约模块编辑该记录', icon: 'none' })\n        return\n      }\n      this.openTaskForm(task)\n    },\n    removeTask (task) {\n      if (!task.calendar_only) {\n        uni.showToast({ title: '仅可删除自建日程', icon: 'none' })\n        return\n      }\n      uni.showModal({\n        title: '删除任务',\n        content: `确定删除「${task.title}」吗？`,\n        success: async res => {\n          if (res.confirm) {\n            try {\n              await deleteTask(task.id)\n              await this.refreshTasks()\n              uni.showToast({ title: '已删除', icon: 'none' })\n            } catch (err) {\n              uni.showToast({ title: err?.message || '删除失败', icon: 'none' })\n            }\n          }\n        }\n      })\n    },\n    shortPill(text) {\n\t  if (!text) return ''\n\t    const str = String(text)\n\t    // 最多保留 3 个字\n\t  return str.length > 3 ? str.slice(0, 3) : str\n\t  }\n  },\n  computed: {\n    selectedDateLabel () {\n      if (!this.selectedDate) return '任务列表'\n      const dateObj = new Date(this.selectedDate.replace(/-/g, '/'))\n      const weekTexts = ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\n      const month = `${dateObj.getMonth() + 1}`.toString().padStart(2, '0')\n      const day = `${dateObj.getDate()}`.toString().padStart(2, '0')\n      return `${month}月${day}日 · ${weekTexts[dateObj.getDay()]}`\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.page { min-height:100vh; background:#F7F7F7; padding:16px; box-sizing:border-box; }\n.greet-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }\n.greet { color:#111; font-weight:600; font-size:18px; }\n.month-chip { font-size:13px; color:#6f6f73; padding:4px 10px; border-radius:16px; background:#fff; box-shadow:0 4px 12px rgba(0,0,0,0.05); }\n.calendar-card { background:#fff; border-radius:22px; padding:16px; box-shadow:0 8px 20px rgba(0,0,0,0.05); margin-bottom:16px; max-width:720rpx; margin-left:auto; margin-right:auto; }\n.calendar-top { display:flex; align-items:center; justify-content:space-between; margin-bottom:6px; }\n.month-title { font-size:20px; font-weight:600; color:#111; }\n.nav-btn { width:32px; height:32px; border-radius:16px; background:#f0f3ff; border:none; font-size:18px; line-height:32px; text-align:center; color:#5b7eff; }\n.nav-btn::after,\n.task-ops button::after,\n.form-actions button::after { border:none; }\n.week-row { display:grid; grid-template-columns:repeat(7,1fr); text-align:center; font-size:13px; color:#99a0b3; padding:10px 0; max-width:720rpx; margin:0 auto; }\n.day-grid { display:grid; grid-template-columns:repeat(7,102rpx); justify-content:center; border:1px solid #eef0f6; border-bottom:none; border-right:none; margin:0 auto; }\n.day-cell { width:102rpx; min-height:60px; padding:8px 6px; position:relative; display:flex; flex-direction:column; border-right:1px solid #eef0f6; border-bottom:1px solid #eef0f6; background:#fff; box-sizing:border-box; }\n.day-cell:nth-child(7n) { border-right:none; }\n.day-cell:nth-last-child(-n+7) { border-bottom:none; }\n.day-cell.dim .day-num { color:#c0c4d4; }\n.day-cell.today { background:rgba(91,126,255,0.08); }\n.day-cell.selected { box-shadow:inset 0 0 0 2px rgba(91,126,255,0.45); border-radius:14px; }\n.day-cell.busy:not(.selected) { background:#f9fbff; }\n.day-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:6px; }\n.day-num { font-size:16px; font-weight:600; color:#1c1c1e; }\n.pill-today { font-size:12px; color:#5b7eff; border:1px solid rgba(91,126,255,0.3); border-radius:10px; padding:0 6px; line-height:18px; }\n.pill-group {\n  display: flex;\n  flex-direction: column;\n  gap: 4rpx;\n}\n.pill {\n  width: 90rpx;              // 固定宽度，比 102rpx 略小一点\n  box-sizing: border-box;\n  padding: 4rpx 6rpx;\n  text-align: center;\n\n  font-size: 10px;           // 比之前 11px 略缩小一点\n  line-height: 20rpx;\n\n  color: #fff;\n  background: #5b7eff;\n  border-radius: 999rpx;\n\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;   // 保险起见，万一你以后想显示 4 字以上\n}\n.pill.more { background:#ff9f43; }\n.calendar-hint { display:block; margin-top:10px; font-size:12px; color:#8e8e93; text-align:center; }\n.tasks-section { margin-bottom:24px; }\n.tasks-title { font-size:17px; font-weight:600; color:#111; margin:0 4px 4px; display:block; }\n.tasks-hint { font-size:12px; color:#99a0b3; margin:4px 4px 8px; display:block; text-align:right; }\n.empty { text-align:center; color:#6F6F73; font-size:13px; padding:22px 0; }\n.task-item { display:flex; flex-direction:column; padding:10px 12px; border-bottom:1px solid #f0f0f0; min-height:18px;height: auto; }\n.task-item:last-child { border-bottom:none; }\n.task-main { display:flex; gap:12px; align-items:flex-start; }\n.task-time { font-size:16px; font-weight:600; color:#caa265; min-width:60px; }\n.task-body { flex:1; }\n.task-title { font-size:15px; color:#1c1c1e; font-weight:500; }\n.task-store { font-size:13px; color:#caa265; margin-top:4px; display:block; }\n.task-note { font-size:13px; color:#6f6f73; margin-top:4px; display:block; }\n.form-mask { position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(0,0,0,0.45); display:flex; align-items:flex-end; padding:16px; z-index:99; }\n.form-card { width:100%; background:#fff; border-radius:24px 24px 12px 12px; padding:20px; box-shadow:0 -8px 24px rgba(0,0,0,0.1); }\n.form-title { font-size:16px; font-weight:600; margin-bottom:14px; text-align:center; color:#111; }\n.form-field { margin-bottom:14px; }\n.form-field:last-of-type { margin-bottom:18px; }\n.field-label { font-size:13px; color:#6f6f73; margin-bottom:4px; display:block; }\n.field-value { font-size:15px; color:#1c1c1e; }\n.field-input, .field-textarea { display:block; width:100%; border:1px solid #dedfe3; border-radius:16px; padding:12px; font-size:14px; box-sizing:border-box; background:#fff; color:#1c1c1e; }\n.field-input { height:44px; line-height:20px; }\n.field-input::placeholder { color:#a4a6ad; }\n.field-textarea { min-height:80px; line-height:1.4; }\n.picker-value { width:100%; border:1px solid #dedfe3; border-radius:16px; padding:12px; font-size:14px; color:#1c1c1e; background:#fff; }\n.form-actions { display:flex; gap:12px; }\n.form-actions button { flex:1; border:none; border-radius:22px; padding:12px 0; font-size:15px; }\n.form-actions .ghost { background:#f5f5f5; color:#1c1c1e; }\n.form-actions .primary { background:#caa265; color:#fff; }\n</style>\n","import MiniProgramPage from '/Users/zhouzhongwei/Documents/HBuilderProjects/be-crm-main/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["listAllTasks","uni","fetchShopHistory","updateTask","createTask","deleteTask"],"mappings":"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"}