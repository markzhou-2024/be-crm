{"version":3,"file":"shops.js","sources":["api/shops.js"],"sourcesContent":["const shopsService = uniCloud.importObject('curd-shops')\n\nfunction normalizeResponse(res) {\n  if (res && typeof res === 'object' && 'errCode' in res && res.errCode !== 0) {\n    const err = new Error(res.errMsg || '请求失败')\n    err.errCode = res.errCode\n    throw err\n  }\n  if (Array.isArray(res)) return res\n  if (res && Array.isArray(res.data)) return res.data\n  return []\n}\n\nexport async function fetchShops() {\n  const res = await shopsService.listMyShops()\n  return normalizeResponse(res)\n}\n\nexport async function fetchShopHistory(limit = 50) {\n  const res = await shopsService.listHistoryShops({ limit })\n  return normalizeResponse(res)\n}\n"],"names":["uniCloud"],"mappings":";;AAAA,MAAM,eAAeA,cAAAA,GAAS,aAAa,YAAY;AAEvD,SAAS,kBAAkB,KAAK;AAC9B,MAAI,OAAO,OAAO,QAAQ,YAAY,aAAa,OAAO,IAAI,YAAY,GAAG;AAC3E,UAAM,MAAM,IAAI,MAAM,IAAI,UAAU,MAAM;AAC1C,QAAI,UAAU,IAAI;AAClB,UAAM;AAAA,EACP;AACD,MAAI,MAAM,QAAQ,GAAG;AAAG,WAAO;AAC/B,MAAI,OAAO,MAAM,QAAQ,IAAI,IAAI;AAAG,WAAO,IAAI;AAC/C,SAAO,CAAE;AACX;AAEO,eAAe,aAAa;AACjC,QAAM,MAAM,MAAM,aAAa,YAAa;AAC5C,SAAO,kBAAkB,GAAG;AAC9B;AAEO,eAAe,iBAAiB,QAAQ,IAAI;AACjD,QAAM,MAAM,MAAM,aAAa,iBAAiB,EAAE,MAAK,CAAE;AACzD,SAAO,kBAAkB,GAAG;AAC9B;;;"}