{"version":3,"file":"analytics.js","sources":["api/analytics.js"],"sourcesContent":["const analyticsService = uniCloud.importObject('analytics', { customUI: true })\n\nfunction unwrap (res) {\n  if (!res) return res\n  if (typeof res === 'object') {\n    if (res.errCode !== undefined && res.errCode !== 0) {\n      const err = new Error(res.errMsg || '请求失败')\n      err.errCode = res.errCode\n      throw err\n    }\n    if (res.code !== undefined && res.code !== 0) {\n      const err = new Error(res.message || '请求失败')\n      err.code = res.code\n      throw err\n    }\n    if (res.data !== undefined) return res.data\n  }\n  return res\n}\n\nexport async function fetchNextWeekBookings (params = {}) {\n  const res = await analyticsService.next7DaysBookings(params)\n  return unwrap(res) || []\n}\n\nexport async function fetchMonthCalendarSummary (params = {}) {\n  const res = await analyticsService.monthCalendarSummary(params)\n  return unwrap(res)\n}\n\nexport async function fetchStoreMonthlyKPI (params = {}) {\n  const res = await analyticsService.storeMonthlyKPI(params)\n  return unwrap(res) || { arrive_customer_distinct: 0, service_count: 0, consume_amount: 0 }\n}\n\nexport async function fetchCustomerStoreVisitCount (params = {}) {\n  const res = await analyticsService.customerStoreVisitCount(params)\n  return unwrap(res) || { visit_count: 0 }\n}\n\nexport async function fetchCustomerSegmentation (params = {}) {\n  const res = await analyticsService.customerSegmentationMonthly(params)\n  return unwrap(res)\n}\n"],"names":["uniCloud"],"mappings":";;AAAA,MAAM,mBAAmBA,cAAQ,GAAC,aAAa,aAAa,EAAE,UAAU,MAAM;AAE9E,SAAS,OAAQ,KAAK;AACpB,MAAI,CAAC;AAAK,WAAO;AACjB,MAAI,OAAO,QAAQ,UAAU;AAC3B,QAAI,IAAI,YAAY,UAAa,IAAI,YAAY,GAAG;AAClD,YAAM,MAAM,IAAI,MAAM,IAAI,UAAU,MAAM;AAC1C,UAAI,UAAU,IAAI;AAClB,YAAM;AAAA,IACP;AACD,QAAI,IAAI,SAAS,UAAa,IAAI,SAAS,GAAG;AAC5C,YAAM,MAAM,IAAI,MAAM,IAAI,WAAW,MAAM;AAC3C,UAAI,OAAO,IAAI;AACf,YAAM;AAAA,IACP;AACD,QAAI,IAAI,SAAS;AAAW,aAAO,IAAI;AAAA,EACxC;AACD,SAAO;AACT;AAEO,eAAe,sBAAuB,SAAS,IAAI;AACxD,QAAM,MAAM,MAAM,iBAAiB,kBAAkB,MAAM;AAC3D,SAAO,OAAO,GAAG,KAAK,CAAE;AAC1B;AAEO,eAAe,0BAA2B,SAAS,IAAI;AAC5D,QAAM,MAAM,MAAM,iBAAiB,qBAAqB,MAAM;AAC9D,SAAO,OAAO,GAAG;AACnB;AAEO,eAAe,qBAAsB,SAAS,IAAI;AACvD,QAAM,MAAM,MAAM,iBAAiB,gBAAgB,MAAM;AACzD,SAAO,OAAO,GAAG,KAAK,EAAE,0BAA0B,GAAG,eAAe,GAAG,gBAAgB,EAAG;AAC5F;AAEO,eAAe,6BAA8B,SAAS,IAAI;AAC/D,QAAM,MAAM,MAAM,iBAAiB,wBAAwB,MAAM;AACjE,SAAO,OAAO,GAAG,KAAK,EAAE,aAAa,EAAG;AAC1C;;;;;"}