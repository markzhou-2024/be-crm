"use strict";const e=require("../../common/vendor.js"),i={data(){return{customerId:"",customerName:"",form:{package_name:"",service_times:"",amount:"",remark:""}}},onLoad(){const t=this.getOpenerEventChannel&&this.getOpenerEventChannel();t&&(t.on("initCustomerInfo",r=>{this.customerId=(r==null?void 0:r.customerId)||"",this.customerName=(r==null?void 0:r.customerName)||""}),this.eventChannel=t)},methods:{cancel(){e.index.navigateBack()},validate(){if(!this.form.package_name.trim())return e.index.showToast({title:"请输入套餐名称",icon:"none"}),!1;const t=Number(this.form.service_times);if(!Number.isInteger(t)||t<=0)return e.index.showToast({title:"服务次数须为正整数",icon:"none"}),!1;const r=Number(this.form.amount);return isNaN(r)||r<0||!/^\d+(\.\d{1,2})?$/.test(this.form.amount)?(e.index.showToast({title:"费用格式不正确",icon:"none"}),!1):(this.form.service_times=t,this.form.amount=r,!0)},submit(){if(!this.validate())return;const t={customer_id:this.customerId,package_name:this.form.package_name.trim(),service_times:this.form.service_times,amount:this.form.amount,remark:this.form.remark.trim()};e.index.__f__("log","at pages/purchases/create.vue:94","purchase payload",t),this.eventChannel&&this.eventChannel.emit("purchaseCreated",t),e.index.navigateBack()}}};function o(t,r,c,u,n,s){return{a:e.t(n.customerName?`客户：${n.customerName}`:""),b:n.form.package_name,c:e.o(m=>n.form.package_name=m.detail.value),d:n.form.service_times,e:e.o(m=>n.form.service_times=m.detail.value),f:n.form.amount,g:e.o(m=>n.form.amount=m.detail.value),h:n.form.remark,i:e.o(m=>n.form.remark=m.detail.value),j:e.o((...m)=>s.cancel&&s.cancel(...m)),k:e.o((...m)=>s.submit&&s.submit(...m))}}const a=e._export_sfc(i,[["render",o],["__scopeId","data-v-367e90ab"]]);wx.createPage(a);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/purchases/create.js.map
