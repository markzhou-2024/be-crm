"use strict";const t=require("../../common/vendor.js"),m=require("../../utils/shopsStore.js"),a={data(){return{submitting:!1,form:{store_name:"",store_address:"",phone:"",business_hours:"10:00 - 22:00",cover_image:"",status:"active"}}},methods:{async submit(){if(this.submitting)return;if(!this.form.store_name||!this.form.store_address){t.index.showToast({title:"请填写必填项",icon:"none"});return}this.submitting=!0;const c=t.tr.importObject("curd-shops");try{const o=await c.createShop({...this.form}),n=(o==null?void 0:o.data)||{},r=m.loadShops([]),e=n._id?n:{...this.form,_id:n._id||Date.now().toString()},i=r.findIndex(s=>s._id===e._id);i>=0?r.splice(i,1,e):r.unshift(e),m.saveShops(r),t.index.showToast({title:"创建成功",icon:"success"}),setTimeout(()=>t.index.navigateBack(),400)}catch(o){t.index.showToast({title:(o==null?void 0:o.errMsg)||(o==null?void 0:o.message)||"保存失败",icon:"none"})}finally{this.submitting=!1}},cancel(){this.submitting||t.index.navigateBack()}}};function u(c,o,n,r,e,i){return{a:e.form.store_name,b:t.o(s=>e.form.store_name=s.detail.value),c:e.form.store_address,d:t.o(s=>e.form.store_address=s.detail.value),e:e.form.phone,f:t.o(s=>e.form.phone=s.detail.value),g:e.form.business_hours,h:t.o(s=>e.form.business_hours=s.detail.value),i:e.form.cover_image,j:t.o(s=>e.form.cover_image=s.detail.value),k:e.submitting,l:t.o((...s)=>i.submit&&i.submit(...s)),m:e.submitting,n:t.o((...s)=>i.cancel&&i.cancel(...s))}}const _=t._export_sfc(a,[["render",u],["__scopeId","data-v-d26d6131"]]);wx.createPage(_);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my-shops/create.js.map
