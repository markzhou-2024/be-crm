"use strict";const s=require("../../common/vendor.js"),n={data(){return{id:"",submitting:!1,form:{_id:"",store_name:"",store_address:"",phone:"",business_hours:"10:00 - 22:00",cover_image:"",status:"active"}}},created(){this.service=s.tr.importObject("curd-shops")},onLoad(e){if(this.id=e&&e.id||"",!this.id){s.index.showToast({title:"缺少门店ID",icon:"none"}),setTimeout(()=>s.index.navigateBack(),400);return}this.loadData()},methods:{async loadData(){try{const e=await this.service.getShopById(this.id);if(!e){s.index.showToast({title:"记录不存在",icon:"none"}),setTimeout(()=>s.index.navigateBack(),400);return}this.form={...e}}catch(e){s.index.showToast({title:(e==null?void 0:e.errMsg)||(e==null?void 0:e.message)||"加载失败",icon:"none"})}},async submit(){if(!this.submitting){if(!this.form.store_name||!this.form.store_address){s.index.showToast({title:"请填写必填项",icon:"none"});return}this.submitting=!0;try{await this.service.updateShop(this.form),s.index.showToast({title:"保存成功",icon:"success"}),setTimeout(()=>s.index.navigateBack(),400)}catch(e){s.index.showToast({title:(e==null?void 0:e.errMsg)||(e==null?void 0:e.message)||"保存失败",icon:"none"})}finally{this.submitting=!1}}},cancel(){this.submitting||s.index.navigateBack()}}};function r(e,c,m,u,i,o){return{a:i.form.store_name,b:s.o(t=>i.form.store_name=t.detail.value),c:i.form.store_address,d:s.o(t=>i.form.store_address=t.detail.value),e:i.form.phone,f:s.o(t=>i.form.phone=t.detail.value),g:i.form.business_hours,h:s.o(t=>i.form.business_hours=t.detail.value),i:i.form.cover_image,j:s.o(t=>i.form.cover_image=t.detail.value),k:i.submitting,l:s.o((...t)=>o.submit&&o.submit(...t)),m:i.submitting,n:s.o((...t)=>o.cancel&&o.cancel(...t))}}const a=s._export_sfc(n,[["render",r],["__scopeId","data-v-50883f83"]]);wx.createPage(a);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my-shops/edit.js.map
