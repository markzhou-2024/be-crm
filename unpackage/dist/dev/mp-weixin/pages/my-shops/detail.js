"use strict";const e=require("../../common/vendor.js"),a=require("../../api/customers.js"),d={data(){return{id:"",shop:{store_name:"",store_address:"",cover_image:"",month_revenue:0,customer_count:0,phone:"",business_hours:"10:00 - 22:00",status:"active"}}},created(){this.service=e.tr.importObject("curd-shops")},onLoad(t){if(this.id=t&&t.id||"",e.index.setNavigationBarTitle({title:"门店详情"}),!this.id){e.index.showToast({title:"缺少门店ID",icon:"none"});return}this.fetchShop()},onShow(){this.id&&this.fetchShop()},methods:{async fetchShop(){try{const t=await this.service.getShopById(this.id);if(t){const i={...t};try{const r=await a.fetchCustomers();i.customer_count=(r||[]).filter(c=>c.store_id===this.id).length}catch{i.customer_count=t.customer_count||0}this.shop=i,i.store_name&&e.index.setNavigationBarTitle({title:i.store_name})}else e.index.showToast({title:"未找到门店信息",icon:"none"})}catch(t){e.index.showToast({title:(t==null?void 0:t.errMsg)||(t==null?void 0:t.message)||"加载失败",icon:"none"})}},addCustomer(){e.index.showToast({title:"添加客户（待接后端）",icon:"none"})},openCalendar(){e.index.showToast({title:"预约日历（待接后端）",icon:"none"})},goEdit(){e.index.navigateTo({url:`/pages/my-shops/edit?id=${this.id}`})},goCustomers(){e.index.navigateTo({url:`/pages/my-customers/index?store_id=${this.id}`})}}};function h(t,i,r,c,n,s){return{a:e.o((...o)=>s.goEdit&&s.goEdit(...o)),b:n.shop.cover_image,c:e.t(n.shop.store_name),d:e.t(n.shop.phone||"—"),e:e.t(n.shop.store_address),f:e.t(n.shop.business_hours||"10:00 - 22:00"),g:e.t(n.shop.customer_count||0),h:e.o((...o)=>s.goCustomers&&s.goCustomers(...o)),i:e.o((...o)=>s.addCustomer&&s.addCustomer(...o)),j:e.o((...o)=>s.openCalendar&&s.openCalendar(...o))}}const u=e._export_sfc(d,[["render",h],["__scopeId","data-v-533450a3"]]);wx.createPage(u);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my-shops/detail.js.map
