"use strict";const e=require("../../../../common/vendor.js"),u=require("./validator.js"),m=require("../../common/login-page.mixin.js");require("../../common/store.js");const c=e.tr.importObject("uni-id-co"),p={mixins:[m.mixin],data(){return{formData:{username:"",nickname:"",password:"",password2:"",captcha:""},rules:u.rules,focusUsername:!1,focusNickname:!1,focusPassword:!1,focusPassword2:!1,logo:"/static/logo.png"}},onReady(){this.$refs.form.setRules(this.rules)},onShow(){},methods:{submit(){this.$refs.form.validate().then(a=>{if(this.formData.captcha.length!=4)return this.$refs.captcha.focusCaptchaInput=!0,e.index.showToast({title:"请输入验证码",icon:"none",duration:3e3});if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup(()=>{this.submitForm(a)});this.submitForm(a)}).catch(a=>{let r=a[0].key;r=r.replace(r[0],r[0].toUpperCase()),this["focus"+r]=!0})},submitForm(a){c.registerUser(this.formData).then(r=>{this.loginSuccess(r)}).catch(r=>{e.index.__f__("log","at uni_modules/uni-id-pages/pages/register/register.vue:120",r.message),this.$refs.captcha.getImageCaptcha()})},navigateBack(){e.index.navigateBack()},toLogin(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})},registerByEmail(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/register/register-by-email"})}}};if(!Array){const a=e.resolveComponent("uni-easyinput"),r=e.resolveComponent("uni-forms-item"),i=e.resolveComponent("uni-captcha"),t=e.resolveComponent("uni-id-pages-agreements"),s=e.resolveComponent("uni-forms");(a+r+i+t+s)()}const f=()=>"../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js",l=()=>"../../../uni-forms/components/uni-forms-item/uni-forms-item.js",g=()=>"../../../uni-captcha/components/uni-captcha/uni-captcha.js",_=()=>"../../components/uni-id-pages-agreements/uni-id-pages-agreements.js",h=()=>"../../../uni-forms/components/uni-forms/uni-forms.js";Math||(f+l+g+_+h)();function d(a,r,i,t,s,n){return{a:s.logo,b:e.o(o=>s.focusUsername=!1),c:e.o(o=>s.formData.username=o),d:e.p({inputBorder:!1,focus:s.focusUsername,placeholder:"请输入用户名",trim:"both",modelValue:s.formData.username}),e:e.p({name:"username",required:!0}),f:e.o(o=>s.focusNickname=!1),g:e.o(o=>s.formData.nickname=o),h:e.p({inputBorder:!1,focus:s.focusNickname,placeholder:"请输入用户昵称",trim:"both",modelValue:s.formData.nickname}),i:e.p({name:"nickname"}),j:e.o(o=>s.focusPassword=!1),k:e.o(o=>s.formData.password=o),l:e.p({inputBorder:!1,focus:s.focusPassword,maxlength:"20",placeholder:"请输入"+(a.config.passwordStrength=="weak"?"6":"8")+"-16位密码",type:"password",trim:"both",modelValue:s.formData.password}),m:e.o(o=>s.formData.password=o),n:e.p({name:"password",required:!0,modelValue:s.formData.password}),o:e.o(o=>s.focusPassword2=!1),p:e.o(o=>s.formData.password2=o),q:e.p({inputBorder:!1,focus:s.focusPassword2,placeholder:"再次输入密码",maxlength:"20",type:"password",trim:"both",modelValue:s.formData.password2}),r:e.o(o=>s.formData.password2=o),s:e.p({name:"password2",required:!0,modelValue:s.formData.password2}),t:e.sr("captcha","53217c73-10,53217c73-9"),v:e.o(o=>s.formData.captcha=o),w:e.p({scene:"register",modelValue:s.formData.captcha}),x:e.sr("agreements","53217c73-11,53217c73-0"),y:e.p({scope:"register"}),z:e.o((...o)=>n.submit&&n.submit(...o)),A:e.o((...o)=>n.navigateBack&&n.navigateBack(...o)),B:e.o((...o)=>n.registerByEmail&&n.registerByEmail(...o)),C:e.o((...o)=>n.toLogin&&n.toLogin(...o)),D:e.sr("form","53217c73-0"),E:e.p({value:s.formData,rules:s.rules,"validate-trigger":"submit","err-show-type":"toast"})}}const w=e._export_sfc(p,[["render",d]]);wx.createPage(w);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/register/register.js.map
