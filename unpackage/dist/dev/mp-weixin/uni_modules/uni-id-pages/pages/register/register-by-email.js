"use strict";const e=require("../../../../common/vendor.js");require("./validator.js");const t=require("../../common/login-page.mixin.js"),u=require("../../common/password.js"),c=e.tr.importObject("uni-id-co"),l={mixins:[t.mixin],data(){return{formData:{email:"",nickname:"",password:"",password2:"",code:""},rules:{email:{rules:[{required:!0,errorMessage:"请输入邮箱"},{format:"email",errorMessage:"邮箱格式不正确"}]},nickname:{rules:[{minLength:3,maxLength:32,errorMessage:"昵称长度在 {minLength} 到 {maxLength} 个字符"},{validateFunction:function(i,r,m,a){return(/^1\d{10}$/.test(r)||/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(r))&&a("昵称不能是：手机号或邮箱"),/^\d+$/.test(r)&&a("昵称不能为纯数字"),/[\u4E00-\u9FA5\uF900-\uFA2D]{1,}/.test(r)&&a("昵称不能包含中文"),!0}}],label:"昵称"},...u.passwordMod.getPwdRules(),code:{rules:[{required:!0,errorMessage:"请输入邮箱验证码"},{pattern:/^.{6}$/,errorMessage:"邮箱验证码不正确"}]}},focusEmail:!1,focusNickname:!1,focusPassword:!1,focusPassword2:!1,logo:"/static/logo.png"}},onReady(){this.$refs.form.setRules(this.rules)},onShow(){},methods:{submit(){this.$refs.form.validate().then(i=>{if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup(()=>{this.submitForm(i)});this.submitForm(i)}).catch(i=>{let r=i[0].key;r=r.replace(r[0],r[0].toUpperCase()),this["focus"+r]=!0})},submitForm(i){c.registerUserByEmail(this.formData).then(r=>{e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd",complete:m=>{}})}).catch(r=>{e.index.__f__("log","at uni_modules/uni-id-pages/pages/register/register-by-email.vue:163",r.message)})},navigateBack(){e.index.navigateBack()},toLogin(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})},registerByUserName(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/register/register"})}}};if(!Array){const i=e.resolveComponent("uni-easyinput"),r=e.resolveComponent("uni-forms-item"),m=e.resolveComponent("uni-id-pages-email-form"),a=e.resolveComponent("uni-id-pages-agreements"),s=e.resolveComponent("uni-forms");(i+r+m+a+s)()}const p=()=>"../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js",f=()=>"../../../uni-forms/components/uni-forms-item/uni-forms-item.js",g=()=>"../../components/uni-id-pages-email-form/uni-id-pages-email-form.js",d=()=>"../../components/uni-id-pages-agreements/uni-id-pages-agreements.js",_=()=>"../../../uni-forms/components/uni-forms/uni-forms.js";Math||(p+f+g+d+_)();function h(i,r,m,a,s,n){return{a:s.logo,b:e.o(o=>s.focusEmail=!1),c:e.o(o=>s.formData.email=o),d:e.p({inputBorder:!1,focus:s.focusEmail,placeholder:"请输入邮箱",trim:"both",modelValue:s.formData.email}),e:e.p({name:"email",required:!0}),f:e.o(o=>s.focusNickname=!1),g:e.o(o=>s.formData.nickname=o),h:e.p({inputBorder:!1,focus:s.focusNickname,placeholder:"请输入用户昵称",trim:"both",modelValue:s.formData.nickname}),i:e.p({name:"nickname"}),j:e.o(o=>s.focusPassword=!1),k:e.o(o=>s.formData.password=o),l:e.p({inputBorder:!1,focus:s.focusPassword,maxlength:"20",placeholder:"请输入"+(i.config.passwordStrength=="weak"?"6":"8")+"-16位密码",type:"password",trim:"both",modelValue:s.formData.password}),m:e.o(o=>s.formData.password=o),n:e.p({name:"password",required:!0,modelValue:s.formData.password}),o:e.o(o=>s.focusPassword2=!1),p:e.o(o=>s.formData.password2=o),q:e.p({inputBorder:!1,focus:s.focusPassword2,placeholder:"再次输入密码",maxlength:"20",type:"password",trim:"both",modelValue:s.formData.password2}),r:e.o(o=>s.formData.password2=o),s:e.p({name:"password2",required:!0,modelValue:s.formData.password2}),t:e.sr("shortCode","69908120-10,69908120-9"),v:e.o(o=>s.formData.code=o),w:e.p({email:s.formData.email,type:"register",modelValue:s.formData.code}),x:e.p({name:"code"}),y:e.sr("agreements","69908120-11,69908120-0"),z:e.p({scope:"register"}),A:e.o((...o)=>n.submit&&n.submit(...o)),B:e.o((...o)=>n.navigateBack&&n.navigateBack(...o)),C:e.o((...o)=>n.registerByUserName&&n.registerByUserName(...o)),D:e.o((...o)=>n.toLogin&&n.toLogin(...o)),E:e.sr("form","69908120-0"),F:e.p({value:s.formData,rules:s.rules,"validate-trigger":"submit","err-show-type":"toast"})}}const w=e._export_sfc(l,[["render",h]]);wx.createPage(w);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/register/register-by-email.js.map
