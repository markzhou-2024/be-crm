"use strict";const e=require("../../../../common/vendor.js"),u=require("../../common/login-page.mixin.js"),c=e.tr.importObject("uni-id-co",{errorOptions:{type:"toast"}}),m={mixins:[u.mixin],data(){return{password:"",username:"",captcha:"",needCaptcha:!1,focusUsername:!1,focusPassword:!1,logo:"/static/logo.png"}},onShow(){},methods:{toRetrievePwd(){let s="/uni_modules/uni-id-pages/pages/retrieve/retrieve";/^1\d{10}$/.test(this.username)&&(s+=`?phoneNumber=${this.username}`),e.index.navigateTo({url:s})},pwdLogin(){if(!this.password.length)return this.focusPassword=!0,e.index.showToast({title:"请输入密码",icon:"none",duration:3e3});if(!this.username.length)return this.focusUsername=!0,e.index.showToast({title:"请输入手机号/用户名/邮箱",icon:"none",duration:3e3});if(this.needCaptcha&&this.captcha.length!=4)return this.$refs.captcha.getImageCaptcha(),e.index.showToast({title:"请输入验证码",icon:"none",duration:3e3});if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup(this.pwdLogin);let s={password:this.password,captcha:this.captcha};/^1\d{10}$/.test(this.username)?s.mobile=this.username:/@/.test(this.username)?s.email=this.username:s.username=this.username,c.login(s).then(t=>{this.loginSuccess(t)}).catch(t=>{t.errCode=="uni-id-captcha-required"?this.needCaptcha=!0:this.needCaptcha&&this.$refs.captcha.getImageCaptcha()})},toRegister(){e.index.navigateTo({url:this.config.isAdmin?"/uni_modules/uni-id-pages/pages/register/register-admin":"/uni_modules/uni-id-pages/pages/register/register",fail(s){e.index.__f__("error","at uni_modules/uni-id-pages/pages/login/login-withpwd.vue:142",s)}})}}};if(!Array){const s=e.resolveComponent("uni-easyinput"),t=e.resolveComponent("uni-forms-item"),a=e.resolveComponent("uni-forms"),r=e.resolveComponent("uni-captcha"),n=e.resolveComponent("uni-id-pages-agreements"),o=e.resolveComponent("uni-id-pages-fab-login");(s+t+a+r+n+o)()}const p=()=>"../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js",d=()=>"../../../uni-forms/components/uni-forms-item/uni-forms-item.js",g=()=>"../../../uni-forms/components/uni-forms/uni-forms.js",_=()=>"../../../uni-captcha/components/uni-captcha/uni-captcha.js",h=()=>"../../components/uni-id-pages-agreements/uni-id-pages-agreements.js",l=()=>"../../components/uni-id-pages-fab-login/uni-id-pages-fab-login.js";Math||(p+d+g+_+h+l)();function f(s,t,a,r,n,o){return e.e({a:n.logo,b:e.o(i=>n.focusUsername=!1),c:e.o(i=>n.username=i),d:e.p({focus:n.focusUsername,inputBorder:!1,placeholder:"请输入手机号/用户名/邮箱",modelValue:n.username}),e:e.p({name:"username"}),f:e.o(i=>n.focusPassword=!1),g:e.o(i=>n.password=i),h:e.p({focus:n.focusPassword,clearable:!0,type:"password",inputBorder:!1,placeholder:"请输入密码",modelValue:n.password}),i:e.p({name:"password"}),j:n.needCaptcha},n.needCaptcha?{k:e.sr("captcha","58ed63b0-5"),l:e.o(i=>n.captcha=i),m:e.p({focus:!0,scene:"login-by-pwd",modelValue:n.captcha})}:{},{n:e.sr("agreements","58ed63b0-6"),o:e.p({scope:"login"}),p:e.o((...i)=>o.pwdLogin&&o.pwdLogin(...i)),q:!s.config.isAdmin},s.config.isAdmin?{}:{r:e.o((...i)=>o.toRetrievePwd&&o.toRetrievePwd(...i))},{s:e.t(s.config.isAdmin?"注册管理员账号":"注册账号"),t:e.o((...i)=>o.toRegister&&o.toRegister(...i)),v:e.sr("uniFabLogin","58ed63b0-7")})}const w=e._export_sfc(m,[["render",f],["__scopeId","data-v-58ed63b0"]]);wx.createPage(w);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/login/login-withpwd.js.map
