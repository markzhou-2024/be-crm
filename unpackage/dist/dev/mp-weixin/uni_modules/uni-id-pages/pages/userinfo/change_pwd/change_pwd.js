"use strict";const s=require("../../../../../common/vendor.js"),i=require("../../../common/login-page.mixin.js"),m=require("../../../common/password.js"),d=s.tr.importObject("uni-id-co",{customUI:!0}),c={mixins:[i.mixin],data(){return{focusOldPassword:!1,focusNewPassword:!1,focusNewPassword2:!1,formData:{oldPassword:"",newPassword:"",newPassword2:""},rules:{oldPassword:{rules:[{required:!0,errorMessage:"请输入新密码"},{pattern:/^.{6,20}$/,errorMessage:"密码为6 - 20位"}]},...m.passwordMod.getPwdRules("newPassword","newPassword2")},logo:"/static/logo.png"}},onReady(){this.$refs.form.setRules(this.rules)},onShow(){},methods:{submit(){this.$refs.form.validate().then(n=>{let{oldPassword:o,newPassword:u}=this.formData;d.updatePwd({oldPassword:o,newPassword:u}).then(a=>{s.index.removeStorageSync("uni_id_token"),s.index.setStorageSync("uni_id_token_expired",0),s.index.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})}).catch(a=>{s.index.showModal({content:a.message,showCancel:!1})})}).catch(n=>{let o=n[0].key;o=o.replace(o[0],o[0].toUpperCase()),this["focus"+o]=!0})}}};if(!Array){const n=s.resolveComponent("uni-easyinput"),o=s.resolveComponent("uni-forms-item"),u=s.resolveComponent("uni-forms");(n+o+u)()}const f=()=>"../../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js",l=()=>"../../../../uni-forms/components/uni-forms-item/uni-forms-item.js",w=()=>"../../../../uni-forms/components/uni-forms/uni-forms.js";Math||(f+l+w)();function p(n,o,u,a,e,t){return{a:e.logo,b:s.o(r=>e.focusOldPassword=!1),c:s.o(r=>e.formData.oldPassword=r),d:s.p({focus:e.focusOldPassword,type:"password",inputBorder:!1,placeholder:"请输入旧密码",modelValue:e.formData.oldPassword}),e:s.p({name:"oldPassword"}),f:s.o(r=>e.focusNewPassword=!1),g:s.o(r=>e.formData.newPassword=r),h:s.p({focus:e.focusNewPassword,type:"password",inputBorder:!1,placeholder:"请输入新密码",modelValue:e.formData.newPassword}),i:s.p({name:"newPassword"}),j:s.o(r=>e.focusNewPassword2=!1),k:s.o(r=>e.formData.newPassword2=r),l:s.p({focus:e.focusNewPassword2,type:"password",inputBorder:!1,placeholder:"请再次输入新密码",modelValue:e.formData.newPassword2}),m:s.p({name:"newPassword2"}),n:s.o((...r)=>t.submit&&t.submit(...r)),o:s.sr("form","709f36e5-0"),p:s.p({value:e.formData,"err-show-type":"toast"})}}const _=s._export_sfc(c,[["render",p]]);wx.createPage(_);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd.js.map
