"use strict";const e=require("../../../../common/vendor.js"),i=require("../../common/login-page.mixin.js"),p=e.tr.importObject("uni-id-co",{errorOptions:{type:"toast"}}),c={mixins:[i.mixin],data(){return{lock:!1,focusPhone:!0,focusPassword:!1,focusPassword2:!1,formData:{phone:"",code:"",password:"",password2:"",captcha:""},rules:{phone:{rules:[{required:!0,errorMessage:"请输入手机号"},{pattern:/^1\d{10}$/,errorMessage:"手机号码格式不正确"}]},code:{rules:[{required:!0,errorMessage:"请输入短信验证码"},{pattern:/^.{6}$/,errorMessage:"请输入6位验证码"}]},password:{rules:[{required:!0,errorMessage:"请输入新密码"},{pattern:/^.{6,20}$/,errorMessage:"密码为6 - 20位"}]},password2:{rules:[{required:!0,errorMessage:"请确认密码"},{pattern:/^.{6,20}$/,errorMessage:"密码为6 - 20位"},{validateFunction:function(t,r,a,u){return r!=a.password&&u("两次输入密码不一致"),!0}}]}},logo:"/static/logo.png"}},computed:{isPhone(){return/^1\d{10}$/.test(this.formData.phone)},isPwd(){return/^.{6,20}$/.test(this.formData.password)},isCode(){return/^\d{6}$/.test(this.formData.code)}},onLoad(t){t&&t.phoneNumber&&(this.formData.phone=t.phoneNumber,t.lock&&(this.lock=t.lock,this.focusPhone=!0))},onReady(){this.formData.phone&&this.$refs.shortCode.start(),this.$refs.form.setRules(this.rules)},onShow(){},methods:{submit(){this.$refs.form.validate().then(t=>{let{phone:r,password:a,captcha:u,code:o}=this.formData;p.resetPwdBySms({mobile:r,code:o,password:a,captcha:u}).then(n=>{e.index.navigateBack()}).catch(n=>{n.errCode=="uni-id-captcha-required"&&this.$refs.popup.open()}).finally(n=>{this.formData.captcha=""})}).catch(t=>{let r=t[0].key;if(r=="code")return this.$refs.shortCode.focusSmsCodeInput=!0;r=r.replace(r[0],r[0].toUpperCase()),this["focus"+r]=!0})},retrieveByEmail(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/retrieve/retrieve-by-email"})},backLogin(){e.index.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})}}};if(!Array){const t=e.resolveComponent("uni-easyinput"),r=e.resolveComponent("uni-forms-item"),a=e.resolveComponent("uni-id-pages-sms-form"),u=e.resolveComponent("uni-forms"),o=e.resolveComponent("uni-popup-captcha");(t+r+a+u+o)()}const m=()=>"../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js",f=()=>"../../../uni-forms/components/uni-forms-item/uni-forms-item.js",d=()=>"../../components/uni-id-pages-sms-form/uni-id-pages-sms-form.js",l=()=>"../../../uni-forms/components/uni-forms/uni-forms.js",h=()=>"../../../uni-captcha/components/uni-popup-captcha/uni-popup-captcha.js";Math||(m+f+d+l+h)();function _(t,r,a,u,o,n){return{a:o.logo,b:e.o(s=>o.focusPhone=!1),c:e.o(s=>o.formData.phone=s),d:e.p({focus:o.focusPhone,disabled:o.lock,type:"number",inputBorder:!1,maxlength:"11",placeholder:"请输入手机号",modelValue:o.formData.phone}),e:e.p({name:"phone"}),f:e.sr("shortCode","612e2893-4,612e2893-3"),g:e.o(s=>o.formData.code=s),h:e.p({phone:o.formData.phone,type:"reset-pwd-by-sms",modelValue:o.formData.code}),i:e.p({name:"code"}),j:e.o(s=>o.focusPassword=!1),k:e.o(s=>o.formData.password=s),l:e.p({focus:o.focusPassword,type:"password",inputBorder:!1,placeholder:"请输入新密码",modelValue:o.formData.password}),m:e.p({name:"password"}),n:e.o(s=>o.focusPassword2=!1),o:e.o(s=>o.formData.password2=s),p:e.p({focus:o.focusPassword2,type:"password",inputBorder:!1,placeholder:"请再次输入新密码",modelValue:o.formData.password2}),q:e.p({name:"password2"}),r:e.o((...s)=>n.submit&&n.submit(...s)),s:e.o((...s)=>n.retrieveByEmail&&n.retrieveByEmail(...s)),t:e.o((...s)=>n.backLogin&&n.backLogin(...s)),v:e.sr("form","612e2893-0"),w:e.p({value:o.formData,"err-show-type":"toast"}),x:e.sr("popup","612e2893-9"),y:e.o(n.submit),z:e.o(s=>o.formData.captcha=s),A:e.p({scene:"reset-pwd-by-sms",modelValue:o.formData.captcha})}}const g=e._export_sfc(c,[["render",_]]);wx.createPage(g);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/retrieve/retrieve.js.map
