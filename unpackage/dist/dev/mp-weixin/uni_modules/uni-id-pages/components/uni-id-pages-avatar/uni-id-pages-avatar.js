"use strict";const a=require("../../../../common/vendor.js"),o=require("../../common/store.js"),d={data(){return{isPC:!1}},props:{width:{type:String,default(){return"50px"}},height:{type:String,default(){return"50px"}},border:{type:Boolean,default(){return!1}}},async mounted(){},computed:{hasLogin(){return o.store.hasLogin},userInfo(){return o.store.userInfo},avatar_file(){return o.store.userInfo.avatar_file}},methods:{setAvatarFile(t){o.mutations.updateUserInfo({avatar_file:t})},async bindchooseavatar(t){let n=t.detail.avatarUrl,e={extname:n.split(".")[n.split(".").length-1],name:"",url:""},s=this.userInfo._id+""+Date.now();e.name=s;try{a.index.showLoading({title:"更新中",mask:!0});let{fileID:r}=await a.tr.uploadFile({filePath:n,cloudPath:s,fileType:"image"});e.url=r,a.index.hideLoading()}catch(r){a.index.__f__("error","at uni_modules/uni-id-pages/components/uni-id-pages-avatar/uni-id-pages-avatar.vue:94",r)}a.index.__f__("log","at uni_modules/uni-id-pages/components/uni-id-pages-avatar/uni-id-pages-avatar.vue:96","avatar_file",e),this.setAvatarFile(e)},uploadAvatarImg(t){return!1}}};if(!Array){const t=a.resolveComponent("cloud-image"),n=a.resolveComponent("uni-icons");(t+n)()}const l=()=>"../cloud-image/cloud-image.js",c=()=>"../../../uni-icons/components/uni-icons/uni-icons.js";Math||(l+c)();function _(t,n,e,s,r,i){return a.e({a:i.avatar_file},i.avatar_file?{b:a.p({src:i.avatar_file.url,width:e.width,height:e.height})}:{c:e.width,d:e.height,e:e.height,f:a.p({type:"plusempty",size:"30",color:"#dddddd"})},{g:a.o((...u)=>i.bindchooseavatar&&i.bindchooseavatar(...u)),h:a.o((...u)=>i.uploadAvatarImg&&i.uploadAvatarImg(...u)),i:e.border?1:"",j:e.width,k:e.height,l:e.height})}const m=a._export_sfc(d,[["render",_]]);wx.createComponent(m);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/components/uni-id-pages-avatar/uni-id-pages-avatar.js.map
