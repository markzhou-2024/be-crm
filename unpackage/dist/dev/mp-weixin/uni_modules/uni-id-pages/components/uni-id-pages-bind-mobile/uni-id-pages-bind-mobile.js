"use strict";const e=require("../../../../common/vendor.js"),c=e.tr.database();c.collection("uni-id-users");const u=e.tr.importObject("uni-id-co"),a={emits:["success"],computed:{},data(){return{}},methods:{async beforeGetphonenumber(){return await new Promise((i,n)=>{e.index.showLoading({mask:!0}),e.wx$1.checkSession({success(){i(),e.index.hideLoading()},fail(){e.wx$1.login({success({code:o}){e.tr.importObject("uni-id-co",{customUI:!0}).loginByWeixin({code:o}).then(s=>{i()}).catch(s=>{e.index.__f__("log","at uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile.vue:46",s),n()}).finally(s=>{e.index.hideLoading()})},fail:o=>{e.index.__f__("error","at uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile.vue:53",o),n()}})}})})},async bindMobileByMpWeixin(i){i.detail.errMsg=="getPhoneNumber:ok"?(await this.beforeGetphonenumber(),u.bindMobileByMpWeixin(i.detail).then(n=>{this.$emit("success")}).finally(n=>{this.closeMe()})):this.closeMe()},async open(){this.$refs.popup.open()},closeMe(i){this.$refs.popup.close()}}};Array||e.resolveComponent("uni-popup")();const d=()=>"../../../uni-popup/components/uni-popup/uni-popup.js";Math||d();function r(i,n,o,s,l,t){return{a:e.o((...p)=>t.closeMe&&t.closeMe(...p)),b:e.o((...p)=>t.bindMobileByMpWeixin&&t.bindMobileByMpWeixin(...p)),c:e.sr("popup","e0127e04-0"),d:e.p({type:"bottom"})}}const m=e._export_sfc(a,[["render",r],["__scopeId","data-v-e0127e04"]]);wx.createComponent(m);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile.js.map
