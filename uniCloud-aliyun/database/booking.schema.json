// 文档教程: https://uniapp.dcloud.net.cn/uniCloud/schema
{
	"bsonType": "object",
	"dynamic": false,
	"required": [
		"user_id",
		"customer_id",
		"customer_name",
		"service_name",
		"store_name",
		"start_ts",
		"end_ts",
		"status",
		"created_at",
		"updated_at"
	],
	"permission": {
		"read": false,
		"create": false,
		"update": false,
		"delete": false
	},
	"properties": {
		"_id": {
			"description": "ID，系统自动生成"
		},
		"user_id": {
			"bsonType": "string",
			"description": "归属用户ID"
		},
		"customer_id": {
			"bsonType": "string",
			"description": "客户ID"
		},
		"customer_name": {
			"bsonType": "string",
			"description": "客户姓名"
		},
		"service_id": {
			"bsonType": "string",
			"description": "服务/套餐ID，可为空"
		},
		"service_name": {
			"bsonType": "string",
			"description": "服务/套餐名称"
		},
		"store_id": {
			"bsonType": "string",
			"description": "门店ID，可为空"
		},
		"store_name": {
			"bsonType": "string",
			"description": "门店名称"
		},
		"staff_id": {
			"bsonType": "string",
			"description": "美容师/顾问ID，可为空"
		},
		"staff_name": {
			"bsonType": "string",
			"description": "美容师/顾问名称，可为空"
		},
		"start_ts": {
			"bsonType": "long",
			"description": "预约开始时间（毫秒）"
		},
		"end_ts": {
			"bsonType": "long",
			"description": "预约结束时间（毫秒）"
		},
		"status": {
			"bsonType": "string",
			"enum": ["scheduled", "completed", "canceled"],
			"description": "预约状态"
		},
		"remark": {
			"bsonType": "string",
			"description": "备注"
		},
		"created_at": {
			"bsonType": "long",
			"description": "创建时间戳（毫秒）"
		},
		"updated_at": {
			"bsonType": "long",
			"description": "更新时间戳（毫秒）"
		}
	},
	"indexes": [
		{
			"name": "idx_user_customer_time",
			"unique": false,
			"fields": [
				{
					"field": "user_id",
					"order": "asc"
				},
				{
					"field": "customer_id",
					"order": "asc"
				},
				{
					"field": "start_ts",
					"order": "desc"
				}
			]
		},
		{
			"name": "idx_user_store_staff_time",
			"unique": false,
			"fields": [
				{ "field": "user_id", "order": "asc" },
				{ "field": "store_id", "order": "asc" },
				{ "field": "staff_id", "order": "asc" },
				{ "field": "start_ts", "order": "desc" }
			]
		}
	]
}
